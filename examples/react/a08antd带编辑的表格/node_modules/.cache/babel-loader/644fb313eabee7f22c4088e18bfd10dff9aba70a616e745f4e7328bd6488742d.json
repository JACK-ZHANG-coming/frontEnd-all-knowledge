{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\n/* tslint:disable:member-ordering interface-name */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Editor, EditorState, ContentState, CompositeDecorator, Modifier, getDefaultKeyBinding, KeyBindingUtil, DefaultDraftBlockRenderMap } from 'draft-js';\nimport { List, Map } from 'immutable';\nimport 'setimmediate';\nimport classnames from 'classnames';\nimport { createToolbar } from '../Toolbar';\nimport ConfigStore from './ConfigStore';\nimport GetHTML from './export/getHTML';\nimport exportText, { decodeContent } from './export/exportText';\nimport customHTML2Content from './customHTML2Content';\nvar hasCommandModifier = KeyBindingUtil.hasCommandModifier;\nfunction noop() {}\n;\nvar defaultPluginConfig = {};\nvar focusDummyStyle = {\n  width: 0,\n  opacity: 0,\n  border: 0,\n  position: 'absolute',\n  left: 0,\n  top: 0\n};\nvar toolbar = createToolbar();\nvar configStore = new ConfigStore();\nvar EditorCore = function (_React$Component) {\n  _inherits(EditorCore, _React$Component);\n  function EditorCore(props) {\n    _classCallCheck(this, EditorCore);\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n    _this.cancelForceUpdateImmediate = function () {\n      clearImmediate(_this.forceUpdateImmediate);\n      _this.forceUpdateImmediate = null;\n    };\n    _this.handlePastedText = function (text, html) {\n      var editorState = _this.state.editorState;\n      if (html) {\n        var contentState = editorState.getCurrentContent();\n        var selection = editorState.getSelection();\n        var fragment = customHTML2Content(html, contentState);\n        var pastedContent = Modifier.replaceWithFragment(contentState, selection, fragment);\n        var newContent = pastedContent.merge({\n          selectionBefore: selection,\n          selectionAfter: pastedContent.getSelectionAfter().set('hasFocus', true)\n        });\n        _this.setEditorState(EditorState.push(editorState, newContent, 'insert-fragment'), true);\n        return 'handled';\n      }\n      return 'not-handled';\n    };\n    _this.plugins = List(List(props.plugins).flatten(true));\n    var editorState = void 0;\n    if (props.value !== undefined) {\n      if (props.value instanceof EditorState) {\n        editorState = props.value || EditorState.createEmpty();\n      } else {\n        editorState = EditorState.createEmpty();\n      }\n    } else {\n      editorState = EditorState.createEmpty();\n    }\n    editorState = _this.generatorDefaultValue(editorState);\n    _this.state = {\n      plugins: _this.reloadPlugins(),\n      editorState: editorState,\n      customStyleMap: {},\n      customBlockStyleMap: {},\n      compositeDecorator: null\n    };\n    if (props.value !== undefined) {\n      _this.controlledMode = true;\n    }\n    return _this;\n  }\n  EditorCore.ToEditorState = function ToEditorState(text) {\n    var createEmptyContentState = ContentState.createFromText(decodeContent(text) || '');\n    var editorState = EditorState.createWithContent(createEmptyContentState);\n    return EditorState.forceSelection(editorState, createEmptyContentState.getSelectionAfter());\n  };\n  EditorCore.prototype.getDefaultValue = function getDefaultValue() {\n    var _props = this.props,\n      defaultValue = _props.defaultValue,\n      value = _props.value;\n    return value || defaultValue;\n  };\n  EditorCore.prototype.Reset = function Reset() {\n    var defaultValue = this.getDefaultValue();\n    var contentState = defaultValue ? defaultValue.getCurrentContent() : ContentState.createFromText('');\n    var updatedEditorState = EditorState.push(this.state.editorState, contentState, 'remove-range');\n    this.setEditorState(EditorState.forceSelection(updatedEditorState, contentState.getSelectionBefore()));\n  };\n  EditorCore.prototype.SetText = function SetText(text) {\n    var createTextContentState = ContentState.createFromText(text || '');\n    var editorState = EditorState.push(this.state.editorState, createTextContentState, 'change-block-data');\n    this.setEditorState(EditorState.moveFocusToEnd(editorState), true);\n  };\n  EditorCore.prototype.getChildContext = function getChildContext() {\n    return {\n      getEditorState: this.getEditorState,\n      setEditorState: this.setEditorState\n    };\n  };\n  EditorCore.prototype.reloadPlugins = function reloadPlugins() {\n    var _this2 = this;\n    return this.plugins && this.plugins.size ? this.plugins.map(function (plugin) {\n      // 如果插件有 callbacks 方法,则认为插件已经加载。\n      if (plugin.callbacks) {\n        return plugin;\n      }\n      // 如果插件有 constructor 方法,则构造插件\n      if (plugin.hasOwnProperty('constructor')) {\n        var pluginConfig = _extends(_this2.props.pluginConfig, plugin.config || {}, defaultPluginConfig);\n        return plugin.constructor(pluginConfig);\n      }\n      // else 无效插件\n      console.warn('>> 插件: [', plugin.name, '] 无效。插件或许已经过期。');\n      return false;\n    }).filter(function (plugin) {\n      return plugin;\n    }).toArray() : [];\n  };\n  EditorCore.prototype.componentWillMount = function componentWillMount() {\n    var plugins = this.initPlugins().concat([toolbar]);\n    var customStyleMap = {};\n    var customBlockStyleMap = {};\n    var customBlockRenderMap = Map(DefaultDraftBlockRenderMap);\n    var toHTMLList = List([]);\n    // initialize compositeDecorator\n    var compositeDecorator = new CompositeDecorator(plugins.filter(function (plugin) {\n      return plugin.decorators !== undefined;\n    }).map(function (plugin) {\n      return plugin.decorators;\n    }).reduce(function (prev, curr) {\n      return prev.concat(curr);\n    }, []));\n    // initialize Toolbar\n    var toolbarPlugins = List(plugins.filter(function (plugin) {\n      return !!plugin.component && plugin.name !== 'toolbar';\n    }));\n    // load inline styles...\n    plugins.forEach(function (plugin) {\n      var styleMap = plugin.styleMap,\n        blockStyleMap = plugin.blockStyleMap,\n        blockRenderMap = plugin.blockRenderMap,\n        toHtml = plugin.toHtml;\n      if (styleMap) {\n        for (var key in styleMap) {\n          if (styleMap.hasOwnProperty(key)) {\n            customStyleMap[key] = styleMap[key];\n          }\n        }\n      }\n      if (blockStyleMap) {\n        for (var _key in blockStyleMap) {\n          if (blockStyleMap.hasOwnProperty(_key)) {\n            customBlockStyleMap[_key] = blockStyleMap[_key];\n            customBlockRenderMap = customBlockRenderMap.set(_key, {\n              element: null\n            });\n          }\n        }\n      }\n      if (toHtml) {\n        toHTMLList = toHTMLList.push(toHtml);\n      }\n      if (blockRenderMap) {\n        for (var _key2 in blockRenderMap) {\n          if (blockRenderMap.hasOwnProperty(_key2)) {\n            customBlockRenderMap = customBlockRenderMap.set(_key2, blockRenderMap[_key2]);\n          }\n        }\n      }\n    });\n    configStore.set('customStyleMap', customStyleMap);\n    configStore.set('customBlockStyleMap', customBlockStyleMap);\n    configStore.set('blockRenderMap', customBlockRenderMap);\n    configStore.set('customStyleFn', this.customStyleFn.bind(this));\n    configStore.set('toHTMLList', toHTMLList);\n    this.setState({\n      toolbarPlugins: toolbarPlugins,\n      compositeDecorator: compositeDecorator\n    });\n    this.setEditorState(EditorState.set(this.state.editorState, {\n      decorator: compositeDecorator\n    }), false, false);\n  };\n  EditorCore.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (this.forceUpdateImmediate) {\n      this.cancelForceUpdateImmediate();\n    }\n    if (this.controlledMode) {\n      var decorators = nextProps.value.getDecorator();\n      var editorState = decorators ? nextProps.value : EditorState.set(nextProps.value, {\n        decorator: this.state.compositeDecorator\n      });\n      this.setState({\n        editorState: editorState\n      });\n    }\n  };\n  EditorCore.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.cancelForceUpdateImmediate();\n  };\n  // 处理 value\n\n  EditorCore.prototype.generatorDefaultValue = function generatorDefaultValue(editorState) {\n    var defaultValue = this.getDefaultValue();\n    if (defaultValue) {\n      return defaultValue;\n    }\n    return editorState;\n  };\n  EditorCore.prototype.getStyleMap = function getStyleMap() {\n    return configStore.get('customStyleMap');\n  };\n  EditorCore.prototype.setStyleMap = function setStyleMap(customStyleMap) {\n    configStore.set('customStyleMap', customStyleMap);\n    this.render();\n  };\n  EditorCore.prototype.initPlugins = function initPlugins() {\n    var _this3 = this;\n    var enableCallbacks = ['focus', 'getEditorState', 'setEditorState', 'getStyleMap', 'setStyleMap'];\n    return this.getPlugins().map(function (plugin) {\n      enableCallbacks.forEach(function (callbackName) {\n        if (plugin.callbacks.hasOwnProperty(callbackName)) {\n          plugin.callbacks[callbackName] = _this3[callbackName].bind(_this3);\n        }\n      });\n      return plugin;\n    });\n  };\n  EditorCore.prototype.focusEditor = function focusEditor(ev) {\n    this.refs.editor.focus(ev);\n    if (this.props.readOnly) {\n      this._focusDummy.focus();\n    }\n    if (this.props.onFocus) {\n      this.props.onFocus(ev);\n    }\n  };\n  EditorCore.prototype._focus = function _focus(ev) {\n    if (!ev || !ev.nativeEvent || !ev.nativeEvent.target) {\n      return;\n    }\n    if (document.activeElement && document.activeElement.getAttribute('contenteditable') === 'true') {\n      return;\n    }\n    return this.focus(ev);\n  };\n  EditorCore.prototype.focus = function focus(ev) {\n    var _this4 = this;\n    var event = ev && ev.nativeEvent;\n    if (event && event.target === this._editorWrapper) {\n      var editorState = this.state.editorState;\n      var selection = editorState.getSelection();\n      if (!selection.getHasFocus()) {\n        if (selection.isCollapsed()) {\n          return this.setState({\n            editorState: EditorState.moveSelectionToEnd(editorState)\n          }, function () {\n            _this4.focusEditor(ev);\n          });\n        }\n      }\n    }\n    this.focusEditor(ev);\n  };\n  EditorCore.prototype.getPlugins = function getPlugins() {\n    return this.state.plugins.slice();\n  };\n  EditorCore.prototype.getEventHandler = function getEventHandler() {\n    var _this5 = this;\n    var enabledEvents = ['onUpArrow', 'onDownArrow', 'handleReturn', 'onFocus', 'onBlur', 'onTab', 'handlePastedText'];\n    var eventHandler = {};\n    enabledEvents.forEach(function (event) {\n      eventHandler[event] = _this5.generatorEventHandler(event);\n    });\n    return eventHandler;\n  };\n  EditorCore.prototype.getEditorState = function getEditorState() {\n    var needFocus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (needFocus) {\n      this.refs.editor.focus();\n    }\n    return this.state.editorState;\n  };\n  EditorCore.prototype.setEditorState = function setEditorState(editorState) {\n    var _this6 = this;\n    var focusEditor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var triggerChange = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var newEditorState = editorState;\n    this.getPlugins().forEach(function (plugin) {\n      if (plugin.onChange) {\n        var updatedEditorState = plugin.onChange(newEditorState);\n        if (updatedEditorState) {\n          newEditorState = updatedEditorState;\n        }\n      }\n    });\n    if (this.props.onChange && triggerChange) {\n      this.props.onChange(newEditorState);\n      // close this issue https://github.com/ant-design/ant-design/issues/5788\n      // when onChange not take any effect\n      // `<Editor />` won't rerender cause no props is changed.\n      // add an timeout here,\n      // if props.onChange not trigger componentWillReceiveProps,\n      // we will force render Editor with previous editorState,\n      if (this.controlledMode) {\n        this.forceUpdateImmediate = setImmediate(function () {\n          return _this6.setState({\n            editorState: new EditorState(_this6.state.editorState.getImmutable())\n          });\n        });\n      }\n    }\n    if (!this.controlledMode) {\n      this.setState({\n        editorState: newEditorState\n      }, focusEditor ? function () {\n        return setImmediate(function () {\n          return _this6.refs.editor.focus();\n        });\n      } : noop);\n    }\n  };\n  EditorCore.prototype.handleKeyBinding = function handleKeyBinding(ev) {\n    if (this.props.onKeyDown) {\n      ev.ctrlKey = hasCommandModifier(ev);\n      var keyDownResult = this.props.onKeyDown(ev);\n      if (keyDownResult) {\n        return keyDownResult;\n      }\n      return getDefaultKeyBinding(ev);\n    }\n    return getDefaultKeyBinding(ev);\n  };\n  EditorCore.prototype.handleKeyCommand = function handleKeyCommand(command) {\n    if (this.props.multiLines) {\n      return this.eventHandle('handleKeyBinding', command);\n    }\n    return command === 'split-block' ? 'handled' : 'not-handled';\n  };\n  EditorCore.prototype.getBlockStyle = function getBlockStyle(contentBlock) {\n    var customBlockStyleMap = configStore.get('customBlockStyleMap');\n    var type = contentBlock.getType();\n    if (customBlockStyleMap.hasOwnProperty(type)) {\n      return customBlockStyleMap[type];\n    }\n    return '';\n  };\n  EditorCore.prototype.blockRendererFn = function blockRendererFn(contentBlock) {\n    var blockRenderResult = null;\n    this.getPlugins().forEach(function (plugin) {\n      if (plugin.blockRendererFn) {\n        var result = plugin.blockRendererFn(contentBlock);\n        if (result) {\n          blockRenderResult = result;\n        }\n      }\n    });\n    return blockRenderResult;\n  };\n  EditorCore.prototype.eventHandle = function eventHandle(eventName) {\n    var _props2;\n    var plugins = this.getPlugins();\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key3 = 1; _key3 < _len; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    for (var i = 0; i < plugins.length; i++) {\n      var plugin = plugins[i];\n      if (plugin.callbacks[eventName] && typeof plugin.callbacks[eventName] === 'function') {\n        var _plugin$callbacks;\n        var result = (_plugin$callbacks = plugin.callbacks)[eventName].apply(_plugin$callbacks, args);\n        if (result === true) {\n          return 'handled';\n        }\n      }\n    }\n    return this.props.hasOwnProperty(eventName) && (_props2 = this.props)[eventName].apply(_props2, args) === true ? 'handled' : 'not-handled';\n  };\n  EditorCore.prototype.generatorEventHandler = function generatorEventHandler(eventName) {\n    var _this7 = this;\n    return function () {\n      for (var _len2 = arguments.length, args = Array(_len2), _key4 = 0; _key4 < _len2; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      return _this7.eventHandle.apply(_this7, [eventName].concat(args));\n    };\n  };\n  EditorCore.prototype.customStyleFn = function customStyleFn(styleSet) {\n    if (styleSet.size === 0) {\n      return {};\n    }\n    var plugins = this.getPlugins();\n    var resultStyle = {};\n    for (var i = 0; i < plugins.length; i++) {\n      if (plugins[i].customStyleFn) {\n        var styled = plugins[i].customStyleFn(styleSet);\n        if (styled) {\n          _extends(resultStyle, styled);\n        }\n      }\n    }\n    return resultStyle;\n  };\n  EditorCore.prototype.render = function render() {\n    var _classnames,\n      _this8 = this;\n    var _props3 = this.props,\n      prefixCls = _props3.prefixCls,\n      toolbars = _props3.toolbars,\n      style = _props3.style,\n      readOnly = _props3.readOnly,\n      multiLines = _props3.multiLines;\n    var _state = this.state,\n      editorState = _state.editorState,\n      toolbarPlugins = _state.toolbarPlugins;\n    var customStyleMap = configStore.get('customStyleMap');\n    var blockRenderMap = configStore.get('blockRenderMap');\n    var eventHandler = this.getEventHandler();\n    var Toolbar = toolbar.component;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-editor'] = true, _classnames.readonly = readOnly, _classnames.oneline = !multiLines, _classnames));\n    return React.createElement('div', {\n      style: style,\n      className: cls,\n      onClick: this._focus.bind(this)\n    }, React.createElement(Toolbar, {\n      editorState: editorState,\n      prefixCls: prefixCls,\n      className: prefixCls + '-toolbar',\n      plugins: toolbarPlugins,\n      toolbars: toolbars\n    }), React.createElement('div', {\n      className: prefixCls + '-editor-wrapper',\n      ref: function ref(ele) {\n        return _this8._editorWrapper = ele;\n      },\n      style: style,\n      onClick: function onClick(ev) {\n        return ev.preventDefault();\n      }\n    }, React.createElement(Editor, _extends({}, this.props, eventHandler, {\n      ref: 'editor',\n      customStyleMap: customStyleMap,\n      customStyleFn: this.customStyleFn.bind(this),\n      editorState: editorState,\n      handleKeyCommand: this.handleKeyCommand.bind(this),\n      keyBindingFn: this.handleKeyBinding.bind(this),\n      onChange: this.setEditorState.bind(this),\n      blockStyleFn: this.getBlockStyle.bind(this),\n      blockRenderMap: blockRenderMap,\n      handlePastedText: this.handlePastedText,\n      blockRendererFn: this.blockRendererFn.bind(this)\n    })), readOnly ? React.createElement('input', {\n      style: focusDummyStyle,\n      ref: function ref(ele) {\n        return _this8._focusDummy = ele;\n      },\n      onBlur: eventHandler.onBlur\n    }) : null, this.props.children));\n  };\n  return EditorCore;\n}(React.Component);\nEditorCore.GetText = exportText;\nEditorCore.GetHTML = GetHTML(configStore);\nEditorCore.defaultProps = {\n  multiLines: true,\n  plugins: [],\n  prefixCls: 'rc-editor-core',\n  pluginConfig: {},\n  toolbars: [],\n  spilitLine: 'enter'\n};\nEditorCore.childContextTypes = {\n  getEditorState: PropTypes.func,\n  setEditorState: PropTypes.func\n};\nexport default EditorCore;","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","React","PropTypes","Editor","EditorState","ContentState","CompositeDecorator","Modifier","getDefaultKeyBinding","KeyBindingUtil","DefaultDraftBlockRenderMap","List","Map","classnames","createToolbar","ConfigStore","GetHTML","exportText","decodeContent","customHTML2Content","hasCommandModifier","noop","defaultPluginConfig","focusDummyStyle","width","opacity","border","position","left","top","toolbar","configStore","EditorCore","_React$Component","props","_this","cancelForceUpdateImmediate","clearImmediate","forceUpdateImmediate","handlePastedText","text","html","editorState","state","contentState","getCurrentContent","selection","getSelection","fragment","pastedContent","replaceWithFragment","newContent","merge","selectionBefore","selectionAfter","getSelectionAfter","set","setEditorState","push","plugins","flatten","undefined","createEmpty","generatorDefaultValue","reloadPlugins","customStyleMap","customBlockStyleMap","compositeDecorator","controlledMode","ToEditorState","createEmptyContentState","createFromText","createWithContent","forceSelection","getDefaultValue","_props","defaultValue","Reset","updatedEditorState","getSelectionBefore","SetText","createTextContentState","moveFocusToEnd","getChildContext","getEditorState","_this2","size","map","plugin","callbacks","pluginConfig","config","console","warn","name","filter","toArray","componentWillMount","initPlugins","concat","customBlockRenderMap","toHTMLList","decorators","reduce","prev","curr","toolbarPlugins","component","forEach","styleMap","blockStyleMap","blockRenderMap","toHtml","_key","element","_key2","customStyleFn","bind","setState","decorator","componentWillReceiveProps","nextProps","getDecorator","componentWillUnmount","getStyleMap","get","setStyleMap","render","_this3","enableCallbacks","getPlugins","callbackName","focusEditor","ev","refs","editor","focus","readOnly","_focusDummy","onFocus","_focus","nativeEvent","document","activeElement","getAttribute","_this4","event","_editorWrapper","getHasFocus","isCollapsed","moveSelectionToEnd","slice","getEventHandler","_this5","enabledEvents","eventHandler","generatorEventHandler","needFocus","_this6","triggerChange","newEditorState","onChange","setImmediate","getImmutable","handleKeyBinding","onKeyDown","ctrlKey","keyDownResult","handleKeyCommand","command","multiLines","eventHandle","getBlockStyle","contentBlock","type","getType","blockRendererFn","blockRenderResult","result","eventName","_props2","_len","args","Array","_key3","_plugin$callbacks","apply","_this7","_len2","_key4","styleSet","resultStyle","styled","_classnames","_this8","_props3","prefixCls","toolbars","style","_state","Toolbar","cls","readonly","oneline","createElement","className","onClick","ref","ele","preventDefault","keyBindingFn","blockStyleFn","onBlur","children","Component","GetText","defaultProps","spilitLine","childContextTypes","func"],"sources":["/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd带编辑的表格/node_modules/rc-editor-core/es/EditorCore/index.js"],"sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/* tslint:disable:member-ordering interface-name */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Editor, EditorState, ContentState, CompositeDecorator, Modifier, getDefaultKeyBinding, KeyBindingUtil, DefaultDraftBlockRenderMap } from 'draft-js';\nimport { List, Map } from 'immutable';\nimport 'setimmediate';\nimport classnames from 'classnames';\nimport { createToolbar } from '../Toolbar';\nimport ConfigStore from './ConfigStore';\nimport GetHTML from './export/getHTML';\nimport exportText, { decodeContent } from './export/exportText';\nimport customHTML2Content from './customHTML2Content';\nvar hasCommandModifier = KeyBindingUtil.hasCommandModifier;\n\nfunction noop() {}\n;\nvar defaultPluginConfig = {};\nvar focusDummyStyle = {\n    width: 0,\n    opacity: 0,\n    border: 0,\n    position: 'absolute',\n    left: 0,\n    top: 0\n};\nvar toolbar = createToolbar();\nvar configStore = new ConfigStore();\n\nvar EditorCore = function (_React$Component) {\n    _inherits(EditorCore, _React$Component);\n\n    function EditorCore(props) {\n        _classCallCheck(this, EditorCore);\n\n        var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n        _this.cancelForceUpdateImmediate = function () {\n            clearImmediate(_this.forceUpdateImmediate);\n            _this.forceUpdateImmediate = null;\n        };\n        _this.handlePastedText = function (text, html) {\n            var editorState = _this.state.editorState;\n\n            if (html) {\n                var contentState = editorState.getCurrentContent();\n                var selection = editorState.getSelection();\n                var fragment = customHTML2Content(html, contentState);\n                var pastedContent = Modifier.replaceWithFragment(contentState, selection, fragment);\n                var newContent = pastedContent.merge({\n                    selectionBefore: selection,\n                    selectionAfter: pastedContent.getSelectionAfter().set('hasFocus', true)\n                });\n                _this.setEditorState(EditorState.push(editorState, newContent, 'insert-fragment'), true);\n                return 'handled';\n            }\n            return 'not-handled';\n        };\n        _this.plugins = List(List(props.plugins).flatten(true));\n        var editorState = void 0;\n        if (props.value !== undefined) {\n            if (props.value instanceof EditorState) {\n                editorState = props.value || EditorState.createEmpty();\n            } else {\n                editorState = EditorState.createEmpty();\n            }\n        } else {\n            editorState = EditorState.createEmpty();\n        }\n        editorState = _this.generatorDefaultValue(editorState);\n        _this.state = {\n            plugins: _this.reloadPlugins(),\n            editorState: editorState,\n            customStyleMap: {},\n            customBlockStyleMap: {},\n            compositeDecorator: null\n        };\n        if (props.value !== undefined) {\n            _this.controlledMode = true;\n        }\n        return _this;\n    }\n\n    EditorCore.ToEditorState = function ToEditorState(text) {\n        var createEmptyContentState = ContentState.createFromText(decodeContent(text) || '');\n        var editorState = EditorState.createWithContent(createEmptyContentState);\n        return EditorState.forceSelection(editorState, createEmptyContentState.getSelectionAfter());\n    };\n\n    EditorCore.prototype.getDefaultValue = function getDefaultValue() {\n        var _props = this.props,\n            defaultValue = _props.defaultValue,\n            value = _props.value;\n\n        return value || defaultValue;\n    };\n\n    EditorCore.prototype.Reset = function Reset() {\n        var defaultValue = this.getDefaultValue();\n        var contentState = defaultValue ? defaultValue.getCurrentContent() : ContentState.createFromText('');\n        var updatedEditorState = EditorState.push(this.state.editorState, contentState, 'remove-range');\n        this.setEditorState(EditorState.forceSelection(updatedEditorState, contentState.getSelectionBefore()));\n    };\n\n    EditorCore.prototype.SetText = function SetText(text) {\n        var createTextContentState = ContentState.createFromText(text || '');\n        var editorState = EditorState.push(this.state.editorState, createTextContentState, 'change-block-data');\n        this.setEditorState(EditorState.moveFocusToEnd(editorState), true);\n    };\n\n    EditorCore.prototype.getChildContext = function getChildContext() {\n        return {\n            getEditorState: this.getEditorState,\n            setEditorState: this.setEditorState\n        };\n    };\n\n    EditorCore.prototype.reloadPlugins = function reloadPlugins() {\n        var _this2 = this;\n\n        return this.plugins && this.plugins.size ? this.plugins.map(function (plugin) {\n            // 如果插件有 callbacks 方法,则认为插件已经加载。\n            if (plugin.callbacks) {\n                return plugin;\n            }\n            // 如果插件有 constructor 方法,则构造插件\n            if (plugin.hasOwnProperty('constructor')) {\n                var pluginConfig = _extends(_this2.props.pluginConfig, plugin.config || {}, defaultPluginConfig);\n                return plugin.constructor(pluginConfig);\n            }\n            // else 无效插件\n            console.warn('>> 插件: [', plugin.name, '] 无效。插件或许已经过期。');\n            return false;\n        }).filter(function (plugin) {\n            return plugin;\n        }).toArray() : [];\n    };\n\n    EditorCore.prototype.componentWillMount = function componentWillMount() {\n        var plugins = this.initPlugins().concat([toolbar]);\n        var customStyleMap = {};\n        var customBlockStyleMap = {};\n        var customBlockRenderMap = Map(DefaultDraftBlockRenderMap);\n        var toHTMLList = List([]);\n        // initialize compositeDecorator\n        var compositeDecorator = new CompositeDecorator(plugins.filter(function (plugin) {\n            return plugin.decorators !== undefined;\n        }).map(function (plugin) {\n            return plugin.decorators;\n        }).reduce(function (prev, curr) {\n            return prev.concat(curr);\n        }, []));\n        // initialize Toolbar\n        var toolbarPlugins = List(plugins.filter(function (plugin) {\n            return !!plugin.component && plugin.name !== 'toolbar';\n        }));\n        // load inline styles...\n        plugins.forEach(function (plugin) {\n            var styleMap = plugin.styleMap,\n                blockStyleMap = plugin.blockStyleMap,\n                blockRenderMap = plugin.blockRenderMap,\n                toHtml = plugin.toHtml;\n\n            if (styleMap) {\n                for (var key in styleMap) {\n                    if (styleMap.hasOwnProperty(key)) {\n                        customStyleMap[key] = styleMap[key];\n                    }\n                }\n            }\n            if (blockStyleMap) {\n                for (var _key in blockStyleMap) {\n                    if (blockStyleMap.hasOwnProperty(_key)) {\n                        customBlockStyleMap[_key] = blockStyleMap[_key];\n                        customBlockRenderMap = customBlockRenderMap.set(_key, {\n                            element: null\n                        });\n                    }\n                }\n            }\n            if (toHtml) {\n                toHTMLList = toHTMLList.push(toHtml);\n            }\n            if (blockRenderMap) {\n                for (var _key2 in blockRenderMap) {\n                    if (blockRenderMap.hasOwnProperty(_key2)) {\n                        customBlockRenderMap = customBlockRenderMap.set(_key2, blockRenderMap[_key2]);\n                    }\n                }\n            }\n        });\n        configStore.set('customStyleMap', customStyleMap);\n        configStore.set('customBlockStyleMap', customBlockStyleMap);\n        configStore.set('blockRenderMap', customBlockRenderMap);\n        configStore.set('customStyleFn', this.customStyleFn.bind(this));\n        configStore.set('toHTMLList', toHTMLList);\n        this.setState({\n            toolbarPlugins: toolbarPlugins,\n            compositeDecorator: compositeDecorator\n        });\n        this.setEditorState(EditorState.set(this.state.editorState, { decorator: compositeDecorator }), false, false);\n    };\n\n    EditorCore.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n        if (this.forceUpdateImmediate) {\n            this.cancelForceUpdateImmediate();\n        }\n        if (this.controlledMode) {\n            var decorators = nextProps.value.getDecorator();\n            var editorState = decorators ? nextProps.value : EditorState.set(nextProps.value, { decorator: this.state.compositeDecorator });\n            this.setState({\n                editorState: editorState\n            });\n        }\n    };\n\n    EditorCore.prototype.componentWillUnmount = function componentWillUnmount() {\n        this.cancelForceUpdateImmediate();\n    };\n    // 处理 value\n\n\n    EditorCore.prototype.generatorDefaultValue = function generatorDefaultValue(editorState) {\n        var defaultValue = this.getDefaultValue();\n        if (defaultValue) {\n            return defaultValue;\n        }\n        return editorState;\n    };\n\n    EditorCore.prototype.getStyleMap = function getStyleMap() {\n        return configStore.get('customStyleMap');\n    };\n\n    EditorCore.prototype.setStyleMap = function setStyleMap(customStyleMap) {\n        configStore.set('customStyleMap', customStyleMap);\n        this.render();\n    };\n\n    EditorCore.prototype.initPlugins = function initPlugins() {\n        var _this3 = this;\n\n        var enableCallbacks = ['focus', 'getEditorState', 'setEditorState', 'getStyleMap', 'setStyleMap'];\n        return this.getPlugins().map(function (plugin) {\n            enableCallbacks.forEach(function (callbackName) {\n                if (plugin.callbacks.hasOwnProperty(callbackName)) {\n                    plugin.callbacks[callbackName] = _this3[callbackName].bind(_this3);\n                }\n            });\n            return plugin;\n        });\n    };\n\n    EditorCore.prototype.focusEditor = function focusEditor(ev) {\n        this.refs.editor.focus(ev);\n        if (this.props.readOnly) {\n            this._focusDummy.focus();\n        }\n        if (this.props.onFocus) {\n            this.props.onFocus(ev);\n        }\n    };\n\n    EditorCore.prototype._focus = function _focus(ev) {\n        if (!ev || !ev.nativeEvent || !ev.nativeEvent.target) {\n            return;\n        }\n        if (document.activeElement && document.activeElement.getAttribute('contenteditable') === 'true') {\n            return;\n        }\n        return this.focus(ev);\n    };\n\n    EditorCore.prototype.focus = function focus(ev) {\n        var _this4 = this;\n\n        var event = ev && ev.nativeEvent;\n        if (event && event.target === this._editorWrapper) {\n            var editorState = this.state.editorState;\n\n            var selection = editorState.getSelection();\n            if (!selection.getHasFocus()) {\n                if (selection.isCollapsed()) {\n                    return this.setState({\n                        editorState: EditorState.moveSelectionToEnd(editorState)\n                    }, function () {\n                        _this4.focusEditor(ev);\n                    });\n                }\n            }\n        }\n        this.focusEditor(ev);\n    };\n\n    EditorCore.prototype.getPlugins = function getPlugins() {\n        return this.state.plugins.slice();\n    };\n\n    EditorCore.prototype.getEventHandler = function getEventHandler() {\n        var _this5 = this;\n\n        var enabledEvents = ['onUpArrow', 'onDownArrow', 'handleReturn', 'onFocus', 'onBlur', 'onTab', 'handlePastedText'];\n        var eventHandler = {};\n        enabledEvents.forEach(function (event) {\n            eventHandler[event] = _this5.generatorEventHandler(event);\n        });\n        return eventHandler;\n    };\n\n    EditorCore.prototype.getEditorState = function getEditorState() {\n        var needFocus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        if (needFocus) {\n            this.refs.editor.focus();\n        }\n        return this.state.editorState;\n    };\n\n    EditorCore.prototype.setEditorState = function setEditorState(editorState) {\n        var _this6 = this;\n\n        var focusEditor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var triggerChange = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n        var newEditorState = editorState;\n        this.getPlugins().forEach(function (plugin) {\n            if (plugin.onChange) {\n                var updatedEditorState = plugin.onChange(newEditorState);\n                if (updatedEditorState) {\n                    newEditorState = updatedEditorState;\n                }\n            }\n        });\n        if (this.props.onChange && triggerChange) {\n            this.props.onChange(newEditorState);\n            // close this issue https://github.com/ant-design/ant-design/issues/5788\n            // when onChange not take any effect\n            // `<Editor />` won't rerender cause no props is changed.\n            // add an timeout here,\n            // if props.onChange not trigger componentWillReceiveProps,\n            // we will force render Editor with previous editorState,\n            if (this.controlledMode) {\n                this.forceUpdateImmediate = setImmediate(function () {\n                    return _this6.setState({\n                        editorState: new EditorState(_this6.state.editorState.getImmutable())\n                    });\n                });\n            }\n        }\n        if (!this.controlledMode) {\n            this.setState({ editorState: newEditorState }, focusEditor ? function () {\n                return setImmediate(function () {\n                    return _this6.refs.editor.focus();\n                });\n            } : noop);\n        }\n    };\n\n    EditorCore.prototype.handleKeyBinding = function handleKeyBinding(ev) {\n        if (this.props.onKeyDown) {\n            ev.ctrlKey = hasCommandModifier(ev);\n            var keyDownResult = this.props.onKeyDown(ev);\n            if (keyDownResult) {\n                return keyDownResult;\n            }\n            return getDefaultKeyBinding(ev);\n        }\n        return getDefaultKeyBinding(ev);\n    };\n\n    EditorCore.prototype.handleKeyCommand = function handleKeyCommand(command) {\n        if (this.props.multiLines) {\n            return this.eventHandle('handleKeyBinding', command);\n        }\n        return command === 'split-block' ? 'handled' : 'not-handled';\n    };\n\n    EditorCore.prototype.getBlockStyle = function getBlockStyle(contentBlock) {\n        var customBlockStyleMap = configStore.get('customBlockStyleMap');\n        var type = contentBlock.getType();\n        if (customBlockStyleMap.hasOwnProperty(type)) {\n            return customBlockStyleMap[type];\n        }\n        return '';\n    };\n\n    EditorCore.prototype.blockRendererFn = function blockRendererFn(contentBlock) {\n        var blockRenderResult = null;\n        this.getPlugins().forEach(function (plugin) {\n            if (plugin.blockRendererFn) {\n                var result = plugin.blockRendererFn(contentBlock);\n                if (result) {\n                    blockRenderResult = result;\n                }\n            }\n        });\n        return blockRenderResult;\n    };\n\n    EditorCore.prototype.eventHandle = function eventHandle(eventName) {\n        var _props2;\n\n        var plugins = this.getPlugins();\n\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key3 = 1; _key3 < _len; _key3++) {\n            args[_key3 - 1] = arguments[_key3];\n        }\n\n        for (var i = 0; i < plugins.length; i++) {\n            var plugin = plugins[i];\n            if (plugin.callbacks[eventName] && typeof plugin.callbacks[eventName] === 'function') {\n                var _plugin$callbacks;\n\n                var result = (_plugin$callbacks = plugin.callbacks)[eventName].apply(_plugin$callbacks, args);\n                if (result === true) {\n                    return 'handled';\n                }\n            }\n        }\n        return this.props.hasOwnProperty(eventName) && (_props2 = this.props)[eventName].apply(_props2, args) === true ? 'handled' : 'not-handled';\n    };\n\n    EditorCore.prototype.generatorEventHandler = function generatorEventHandler(eventName) {\n        var _this7 = this;\n\n        return function () {\n            for (var _len2 = arguments.length, args = Array(_len2), _key4 = 0; _key4 < _len2; _key4++) {\n                args[_key4] = arguments[_key4];\n            }\n\n            return _this7.eventHandle.apply(_this7, [eventName].concat(args));\n        };\n    };\n\n    EditorCore.prototype.customStyleFn = function customStyleFn(styleSet) {\n        if (styleSet.size === 0) {\n            return {};\n        }\n        var plugins = this.getPlugins();\n        var resultStyle = {};\n        for (var i = 0; i < plugins.length; i++) {\n            if (plugins[i].customStyleFn) {\n                var styled = plugins[i].customStyleFn(styleSet);\n                if (styled) {\n                    _extends(resultStyle, styled);\n                }\n            }\n        }\n        return resultStyle;\n    };\n\n    EditorCore.prototype.render = function render() {\n        var _classnames,\n            _this8 = this;\n\n        var _props3 = this.props,\n            prefixCls = _props3.prefixCls,\n            toolbars = _props3.toolbars,\n            style = _props3.style,\n            readOnly = _props3.readOnly,\n            multiLines = _props3.multiLines;\n        var _state = this.state,\n            editorState = _state.editorState,\n            toolbarPlugins = _state.toolbarPlugins;\n\n        var customStyleMap = configStore.get('customStyleMap');\n        var blockRenderMap = configStore.get('blockRenderMap');\n        var eventHandler = this.getEventHandler();\n        var Toolbar = toolbar.component;\n        var cls = classnames((_classnames = {}, _classnames[prefixCls + '-editor'] = true, _classnames.readonly = readOnly, _classnames.oneline = !multiLines, _classnames));\n        return React.createElement(\n            'div',\n            { style: style, className: cls, onClick: this._focus.bind(this) },\n            React.createElement(Toolbar, { editorState: editorState, prefixCls: prefixCls, className: prefixCls + '-toolbar', plugins: toolbarPlugins, toolbars: toolbars }),\n            React.createElement(\n                'div',\n                { className: prefixCls + '-editor-wrapper', ref: function ref(ele) {\n                        return _this8._editorWrapper = ele;\n                    }, style: style, onClick: function onClick(ev) {\n                        return ev.preventDefault();\n                    } },\n                React.createElement(Editor, _extends({}, this.props, eventHandler, { ref: 'editor', customStyleMap: customStyleMap, customStyleFn: this.customStyleFn.bind(this), editorState: editorState, handleKeyCommand: this.handleKeyCommand.bind(this), keyBindingFn: this.handleKeyBinding.bind(this), onChange: this.setEditorState.bind(this), blockStyleFn: this.getBlockStyle.bind(this), blockRenderMap: blockRenderMap, handlePastedText: this.handlePastedText, blockRendererFn: this.blockRendererFn.bind(this) })),\n                readOnly ? React.createElement('input', { style: focusDummyStyle, ref: function ref(ele) {\n                        return _this8._focusDummy = ele;\n                    }, onBlur: eventHandler.onBlur }) : null,\n                this.props.children\n            )\n        );\n    };\n\n    return EditorCore;\n}(React.Component);\n\nEditorCore.GetText = exportText;\nEditorCore.GetHTML = GetHTML(configStore);\nEditorCore.defaultProps = {\n    multiLines: true,\n    plugins: [],\n    prefixCls: 'rc-editor-core',\n    pluginConfig: {},\n    toolbars: [],\n    spilitLine: 'enter'\n};\nEditorCore.childContextTypes = {\n    getEditorState: PropTypes.func,\n    setEditorState: PropTypes.func\n};\nexport default EditorCore;"],"mappings":"AAAA,IAAIA,QAAQ,GAAGC,MAAM,CAACC,MAAM,IAAI,UAAUC,MAAM,EAAE;EAAE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;IAAE,IAAIG,MAAM,GAAGF,SAAS,CAACD,CAAC,CAAC;IAAE,KAAK,IAAII,GAAG,IAAID,MAAM,EAAE;MAAE,IAAIN,MAAM,CAACQ,SAAS,CAACC,cAAc,CAACC,IAAI,CAACJ,MAAM,EAAEC,GAAG,CAAC,EAAE;QAAEL,MAAM,CAACK,GAAG,CAAC,GAAGD,MAAM,CAACC,GAAG,CAAC;MAAE;IAAE;EAAE;EAAE,OAAOL,MAAM;AAAE,CAAC;AAEhQ,SAASS,eAAeA,CAACC,QAAQ,EAAEC,WAAW,EAAE;EAAE,IAAI,EAAED,QAAQ,YAAYC,WAAW,CAAC,EAAE;IAAE,MAAM,IAAIC,SAAS,CAAC,mCAAmC,CAAC;EAAE;AAAE;AAExJ,SAASC,0BAA0BA,CAACC,IAAI,EAAEN,IAAI,EAAE;EAAE,IAAI,CAACM,IAAI,EAAE;IAAE,MAAM,IAAIC,cAAc,CAAC,2DAA2D,CAAC;EAAE;EAAE,OAAOP,IAAI,KAAK,OAAOA,IAAI,KAAK,QAAQ,IAAI,OAAOA,IAAI,KAAK,UAAU,CAAC,GAAGA,IAAI,GAAGM,IAAI;AAAE;AAE/O,SAASE,SAASA,CAACC,QAAQ,EAAEC,UAAU,EAAE;EAAE,IAAI,OAAOA,UAAU,KAAK,UAAU,IAAIA,UAAU,KAAK,IAAI,EAAE;IAAE,MAAM,IAAIN,SAAS,CAAC,0DAA0D,GAAG,OAAOM,UAAU,CAAC;EAAE;EAAED,QAAQ,CAACX,SAAS,GAAGR,MAAM,CAACqB,MAAM,CAACD,UAAU,IAAIA,UAAU,CAACZ,SAAS,EAAE;IAAEc,WAAW,EAAE;MAAEC,KAAK,EAAEJ,QAAQ;MAAEK,UAAU,EAAE,KAAK;MAAEC,QAAQ,EAAE,IAAI;MAAEC,YAAY,EAAE;IAAK;EAAE,CAAC,CAAC;EAAE,IAAIN,UAAU,EAAEpB,MAAM,CAAC2B,cAAc,GAAG3B,MAAM,CAAC2B,cAAc,CAACR,QAAQ,EAAEC,UAAU,CAAC,GAAGD,QAAQ,CAACS,SAAS,GAAGR,UAAU;AAAE;;AAE7e;AACA,OAAOS,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,MAAM,EAAEC,WAAW,EAAEC,YAAY,EAAEC,kBAAkB,EAAEC,QAAQ,EAAEC,oBAAoB,EAAEC,cAAc,EAAEC,0BAA0B,QAAQ,UAAU;AAC5J,SAASC,IAAI,EAAEC,GAAG,QAAQ,WAAW;AACrC,OAAO,cAAc;AACrB,OAAOC,UAAU,MAAM,YAAY;AACnC,SAASC,aAAa,QAAQ,YAAY;AAC1C,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,OAAO,MAAM,kBAAkB;AACtC,OAAOC,UAAU,IAAIC,aAAa,QAAQ,qBAAqB;AAC/D,OAAOC,kBAAkB,MAAM,sBAAsB;AACrD,IAAIC,kBAAkB,GAAGX,cAAc,CAACW,kBAAkB;AAE1D,SAASC,IAAIA,CAAA,EAAG,CAAC;AACjB;AACA,IAAIC,mBAAmB,GAAG,CAAC,CAAC;AAC5B,IAAIC,eAAe,GAAG;EAClBC,KAAK,EAAE,CAAC;EACRC,OAAO,EAAE,CAAC;EACVC,MAAM,EAAE,CAAC;EACTC,QAAQ,EAAE,UAAU;EACpBC,IAAI,EAAE,CAAC;EACPC,GAAG,EAAE;AACT,CAAC;AACD,IAAIC,OAAO,GAAGhB,aAAa,CAAC,CAAC;AAC7B,IAAIiB,WAAW,GAAG,IAAIhB,WAAW,CAAC,CAAC;AAEnC,IAAIiB,UAAU,GAAG,UAAUC,gBAAgB,EAAE;EACzC3C,SAAS,CAAC0C,UAAU,EAAEC,gBAAgB,CAAC;EAEvC,SAASD,UAAUA,CAACE,KAAK,EAAE;IACvBnD,eAAe,CAAC,IAAI,EAAEiD,UAAU,CAAC;IAEjC,IAAIG,KAAK,GAAGhD,0BAA0B,CAAC,IAAI,EAAE8C,gBAAgB,CAACnD,IAAI,CAAC,IAAI,EAAEoD,KAAK,CAAC,CAAC;IAEhFC,KAAK,CAACC,0BAA0B,GAAG,YAAY;MAC3CC,cAAc,CAACF,KAAK,CAACG,oBAAoB,CAAC;MAC1CH,KAAK,CAACG,oBAAoB,GAAG,IAAI;IACrC,CAAC;IACDH,KAAK,CAACI,gBAAgB,GAAG,UAAUC,IAAI,EAAEC,IAAI,EAAE;MAC3C,IAAIC,WAAW,GAAGP,KAAK,CAACQ,KAAK,CAACD,WAAW;MAEzC,IAAID,IAAI,EAAE;QACN,IAAIG,YAAY,GAAGF,WAAW,CAACG,iBAAiB,CAAC,CAAC;QAClD,IAAIC,SAAS,GAAGJ,WAAW,CAACK,YAAY,CAAC,CAAC;QAC1C,IAAIC,QAAQ,GAAG7B,kBAAkB,CAACsB,IAAI,EAAEG,YAAY,CAAC;QACrD,IAAIK,aAAa,GAAG1C,QAAQ,CAAC2C,mBAAmB,CAACN,YAAY,EAAEE,SAAS,EAAEE,QAAQ,CAAC;QACnF,IAAIG,UAAU,GAAGF,aAAa,CAACG,KAAK,CAAC;UACjCC,eAAe,EAAEP,SAAS;UAC1BQ,cAAc,EAAEL,aAAa,CAACM,iBAAiB,CAAC,CAAC,CAACC,GAAG,CAAC,UAAU,EAAE,IAAI;QAC1E,CAAC,CAAC;QACFrB,KAAK,CAACsB,cAAc,CAACrD,WAAW,CAACsD,IAAI,CAAChB,WAAW,EAAES,UAAU,EAAE,iBAAiB,CAAC,EAAE,IAAI,CAAC;QACxF,OAAO,SAAS;MACpB;MACA,OAAO,aAAa;IACxB,CAAC;IACDhB,KAAK,CAACwB,OAAO,GAAGhD,IAAI,CAACA,IAAI,CAACuB,KAAK,CAACyB,OAAO,CAAC,CAACC,OAAO,CAAC,IAAI,CAAC,CAAC;IACvD,IAAIlB,WAAW,GAAG,KAAK,CAAC;IACxB,IAAIR,KAAK,CAACvC,KAAK,KAAKkE,SAAS,EAAE;MAC3B,IAAI3B,KAAK,CAACvC,KAAK,YAAYS,WAAW,EAAE;QACpCsC,WAAW,GAAGR,KAAK,CAACvC,KAAK,IAAIS,WAAW,CAAC0D,WAAW,CAAC,CAAC;MAC1D,CAAC,MAAM;QACHpB,WAAW,GAAGtC,WAAW,CAAC0D,WAAW,CAAC,CAAC;MAC3C;IACJ,CAAC,MAAM;MACHpB,WAAW,GAAGtC,WAAW,CAAC0D,WAAW,CAAC,CAAC;IAC3C;IACApB,WAAW,GAAGP,KAAK,CAAC4B,qBAAqB,CAACrB,WAAW,CAAC;IACtDP,KAAK,CAACQ,KAAK,GAAG;MACVgB,OAAO,EAAExB,KAAK,CAAC6B,aAAa,CAAC,CAAC;MAC9BtB,WAAW,EAAEA,WAAW;MACxBuB,cAAc,EAAE,CAAC,CAAC;MAClBC,mBAAmB,EAAE,CAAC,CAAC;MACvBC,kBAAkB,EAAE;IACxB,CAAC;IACD,IAAIjC,KAAK,CAACvC,KAAK,KAAKkE,SAAS,EAAE;MAC3B1B,KAAK,CAACiC,cAAc,GAAG,IAAI;IAC/B;IACA,OAAOjC,KAAK;EAChB;EAEAH,UAAU,CAACqC,aAAa,GAAG,SAASA,aAAaA,CAAC7B,IAAI,EAAE;IACpD,IAAI8B,uBAAuB,GAAGjE,YAAY,CAACkE,cAAc,CAACrD,aAAa,CAACsB,IAAI,CAAC,IAAI,EAAE,CAAC;IACpF,IAAIE,WAAW,GAAGtC,WAAW,CAACoE,iBAAiB,CAACF,uBAAuB,CAAC;IACxE,OAAOlE,WAAW,CAACqE,cAAc,CAAC/B,WAAW,EAAE4B,uBAAuB,CAACf,iBAAiB,CAAC,CAAC,CAAC;EAC/F,CAAC;EAEDvB,UAAU,CAACpD,SAAS,CAAC8F,eAAe,GAAG,SAASA,eAAeA,CAAA,EAAG;IAC9D,IAAIC,MAAM,GAAG,IAAI,CAACzC,KAAK;MACnB0C,YAAY,GAAGD,MAAM,CAACC,YAAY;MAClCjF,KAAK,GAAGgF,MAAM,CAAChF,KAAK;IAExB,OAAOA,KAAK,IAAIiF,YAAY;EAChC,CAAC;EAED5C,UAAU,CAACpD,SAAS,CAACiG,KAAK,GAAG,SAASA,KAAKA,CAAA,EAAG;IAC1C,IAAID,YAAY,GAAG,IAAI,CAACF,eAAe,CAAC,CAAC;IACzC,IAAI9B,YAAY,GAAGgC,YAAY,GAAGA,YAAY,CAAC/B,iBAAiB,CAAC,CAAC,GAAGxC,YAAY,CAACkE,cAAc,CAAC,EAAE,CAAC;IACpG,IAAIO,kBAAkB,GAAG1E,WAAW,CAACsD,IAAI,CAAC,IAAI,CAACf,KAAK,CAACD,WAAW,EAAEE,YAAY,EAAE,cAAc,CAAC;IAC/F,IAAI,CAACa,cAAc,CAACrD,WAAW,CAACqE,cAAc,CAACK,kBAAkB,EAAElC,YAAY,CAACmC,kBAAkB,CAAC,CAAC,CAAC,CAAC;EAC1G,CAAC;EAED/C,UAAU,CAACpD,SAAS,CAACoG,OAAO,GAAG,SAASA,OAAOA,CAACxC,IAAI,EAAE;IAClD,IAAIyC,sBAAsB,GAAG5E,YAAY,CAACkE,cAAc,CAAC/B,IAAI,IAAI,EAAE,CAAC;IACpE,IAAIE,WAAW,GAAGtC,WAAW,CAACsD,IAAI,CAAC,IAAI,CAACf,KAAK,CAACD,WAAW,EAAEuC,sBAAsB,EAAE,mBAAmB,CAAC;IACvG,IAAI,CAACxB,cAAc,CAACrD,WAAW,CAAC8E,cAAc,CAACxC,WAAW,CAAC,EAAE,IAAI,CAAC;EACtE,CAAC;EAEDV,UAAU,CAACpD,SAAS,CAACuG,eAAe,GAAG,SAASA,eAAeA,CAAA,EAAG;IAC9D,OAAO;MACHC,cAAc,EAAE,IAAI,CAACA,cAAc;MACnC3B,cAAc,EAAE,IAAI,CAACA;IACzB,CAAC;EACL,CAAC;EAEDzB,UAAU,CAACpD,SAAS,CAACoF,aAAa,GAAG,SAASA,aAAaA,CAAA,EAAG;IAC1D,IAAIqB,MAAM,GAAG,IAAI;IAEjB,OAAO,IAAI,CAAC1B,OAAO,IAAI,IAAI,CAACA,OAAO,CAAC2B,IAAI,GAAG,IAAI,CAAC3B,OAAO,CAAC4B,GAAG,CAAC,UAAUC,MAAM,EAAE;MAC1E;MACA,IAAIA,MAAM,CAACC,SAAS,EAAE;QAClB,OAAOD,MAAM;MACjB;MACA;MACA,IAAIA,MAAM,CAAC3G,cAAc,CAAC,aAAa,CAAC,EAAE;QACtC,IAAI6G,YAAY,GAAGvH,QAAQ,CAACkH,MAAM,CAACnD,KAAK,CAACwD,YAAY,EAAEF,MAAM,CAACG,MAAM,IAAI,CAAC,CAAC,EAAErE,mBAAmB,CAAC;QAChG,OAAOkE,MAAM,CAAC9F,WAAW,CAACgG,YAAY,CAAC;MAC3C;MACA;MACAE,OAAO,CAACC,IAAI,CAAC,UAAU,EAAEL,MAAM,CAACM,IAAI,EAAE,gBAAgB,CAAC;MACvD,OAAO,KAAK;IAChB,CAAC,CAAC,CAACC,MAAM,CAAC,UAAUP,MAAM,EAAE;MACxB,OAAOA,MAAM;IACjB,CAAC,CAAC,CAACQ,OAAO,CAAC,CAAC,GAAG,EAAE;EACrB,CAAC;EAEDhE,UAAU,CAACpD,SAAS,CAACqH,kBAAkB,GAAG,SAASA,kBAAkBA,CAAA,EAAG;IACpE,IAAItC,OAAO,GAAG,IAAI,CAACuC,WAAW,CAAC,CAAC,CAACC,MAAM,CAAC,CAACrE,OAAO,CAAC,CAAC;IAClD,IAAImC,cAAc,GAAG,CAAC,CAAC;IACvB,IAAIC,mBAAmB,GAAG,CAAC,CAAC;IAC5B,IAAIkC,oBAAoB,GAAGxF,GAAG,CAACF,0BAA0B,CAAC;IAC1D,IAAI2F,UAAU,GAAG1F,IAAI,CAAC,EAAE,CAAC;IACzB;IACA,IAAIwD,kBAAkB,GAAG,IAAI7D,kBAAkB,CAACqD,OAAO,CAACoC,MAAM,CAAC,UAAUP,MAAM,EAAE;MAC7E,OAAOA,MAAM,CAACc,UAAU,KAAKzC,SAAS;IAC1C,CAAC,CAAC,CAAC0B,GAAG,CAAC,UAAUC,MAAM,EAAE;MACrB,OAAOA,MAAM,CAACc,UAAU;IAC5B,CAAC,CAAC,CAACC,MAAM,CAAC,UAAUC,IAAI,EAAEC,IAAI,EAAE;MAC5B,OAAOD,IAAI,CAACL,MAAM,CAACM,IAAI,CAAC;IAC5B,CAAC,EAAE,EAAE,CAAC,CAAC;IACP;IACA,IAAIC,cAAc,GAAG/F,IAAI,CAACgD,OAAO,CAACoC,MAAM,CAAC,UAAUP,MAAM,EAAE;MACvD,OAAO,CAAC,CAACA,MAAM,CAACmB,SAAS,IAAInB,MAAM,CAACM,IAAI,KAAK,SAAS;IAC1D,CAAC,CAAC,CAAC;IACH;IACAnC,OAAO,CAACiD,OAAO,CAAC,UAAUpB,MAAM,EAAE;MAC9B,IAAIqB,QAAQ,GAAGrB,MAAM,CAACqB,QAAQ;QAC1BC,aAAa,GAAGtB,MAAM,CAACsB,aAAa;QACpCC,cAAc,GAAGvB,MAAM,CAACuB,cAAc;QACtCC,MAAM,GAAGxB,MAAM,CAACwB,MAAM;MAE1B,IAAIH,QAAQ,EAAE;QACV,KAAK,IAAIlI,GAAG,IAAIkI,QAAQ,EAAE;UACtB,IAAIA,QAAQ,CAAChI,cAAc,CAACF,GAAG,CAAC,EAAE;YAC9BsF,cAAc,CAACtF,GAAG,CAAC,GAAGkI,QAAQ,CAAClI,GAAG,CAAC;UACvC;QACJ;MACJ;MACA,IAAImI,aAAa,EAAE;QACf,KAAK,IAAIG,IAAI,IAAIH,aAAa,EAAE;UAC5B,IAAIA,aAAa,CAACjI,cAAc,CAACoI,IAAI,CAAC,EAAE;YACpC/C,mBAAmB,CAAC+C,IAAI,CAAC,GAAGH,aAAa,CAACG,IAAI,CAAC;YAC/Cb,oBAAoB,GAAGA,oBAAoB,CAAC5C,GAAG,CAACyD,IAAI,EAAE;cAClDC,OAAO,EAAE;YACb,CAAC,CAAC;UACN;QACJ;MACJ;MACA,IAAIF,MAAM,EAAE;QACRX,UAAU,GAAGA,UAAU,CAAC3C,IAAI,CAACsD,MAAM,CAAC;MACxC;MACA,IAAID,cAAc,EAAE;QAChB,KAAK,IAAII,KAAK,IAAIJ,cAAc,EAAE;UAC9B,IAAIA,cAAc,CAAClI,cAAc,CAACsI,KAAK,CAAC,EAAE;YACtCf,oBAAoB,GAAGA,oBAAoB,CAAC5C,GAAG,CAAC2D,KAAK,EAAEJ,cAAc,CAACI,KAAK,CAAC,CAAC;UACjF;QACJ;MACJ;IACJ,CAAC,CAAC;IACFpF,WAAW,CAACyB,GAAG,CAAC,gBAAgB,EAAES,cAAc,CAAC;IACjDlC,WAAW,CAACyB,GAAG,CAAC,qBAAqB,EAAEU,mBAAmB,CAAC;IAC3DnC,WAAW,CAACyB,GAAG,CAAC,gBAAgB,EAAE4C,oBAAoB,CAAC;IACvDrE,WAAW,CAACyB,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC4D,aAAa,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC/DtF,WAAW,CAACyB,GAAG,CAAC,YAAY,EAAE6C,UAAU,CAAC;IACzC,IAAI,CAACiB,QAAQ,CAAC;MACVZ,cAAc,EAAEA,cAAc;MAC9BvC,kBAAkB,EAAEA;IACxB,CAAC,CAAC;IACF,IAAI,CAACV,cAAc,CAACrD,WAAW,CAACoD,GAAG,CAAC,IAAI,CAACb,KAAK,CAACD,WAAW,EAAE;MAAE6E,SAAS,EAAEpD;IAAmB,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;EACjH,CAAC;EAEDnC,UAAU,CAACpD,SAAS,CAAC4I,yBAAyB,GAAG,SAASA,yBAAyBA,CAACC,SAAS,EAAE;IAC3F,IAAI,IAAI,CAACnF,oBAAoB,EAAE;MAC3B,IAAI,CAACF,0BAA0B,CAAC,CAAC;IACrC;IACA,IAAI,IAAI,CAACgC,cAAc,EAAE;MACrB,IAAIkC,UAAU,GAAGmB,SAAS,CAAC9H,KAAK,CAAC+H,YAAY,CAAC,CAAC;MAC/C,IAAIhF,WAAW,GAAG4D,UAAU,GAAGmB,SAAS,CAAC9H,KAAK,GAAGS,WAAW,CAACoD,GAAG,CAACiE,SAAS,CAAC9H,KAAK,EAAE;QAAE4H,SAAS,EAAE,IAAI,CAAC5E,KAAK,CAACwB;MAAmB,CAAC,CAAC;MAC/H,IAAI,CAACmD,QAAQ,CAAC;QACV5E,WAAW,EAAEA;MACjB,CAAC,CAAC;IACN;EACJ,CAAC;EAEDV,UAAU,CAACpD,SAAS,CAAC+I,oBAAoB,GAAG,SAASA,oBAAoBA,CAAA,EAAG;IACxE,IAAI,CAACvF,0BAA0B,CAAC,CAAC;EACrC,CAAC;EACD;;EAGAJ,UAAU,CAACpD,SAAS,CAACmF,qBAAqB,GAAG,SAASA,qBAAqBA,CAACrB,WAAW,EAAE;IACrF,IAAIkC,YAAY,GAAG,IAAI,CAACF,eAAe,CAAC,CAAC;IACzC,IAAIE,YAAY,EAAE;MACd,OAAOA,YAAY;IACvB;IACA,OAAOlC,WAAW;EACtB,CAAC;EAEDV,UAAU,CAACpD,SAAS,CAACgJ,WAAW,GAAG,SAASA,WAAWA,CAAA,EAAG;IACtD,OAAO7F,WAAW,CAAC8F,GAAG,CAAC,gBAAgB,CAAC;EAC5C,CAAC;EAED7F,UAAU,CAACpD,SAAS,CAACkJ,WAAW,GAAG,SAASA,WAAWA,CAAC7D,cAAc,EAAE;IACpElC,WAAW,CAACyB,GAAG,CAAC,gBAAgB,EAAES,cAAc,CAAC;IACjD,IAAI,CAAC8D,MAAM,CAAC,CAAC;EACjB,CAAC;EAED/F,UAAU,CAACpD,SAAS,CAACsH,WAAW,GAAG,SAASA,WAAWA,CAAA,EAAG;IACtD,IAAI8B,MAAM,GAAG,IAAI;IAEjB,IAAIC,eAAe,GAAG,CAAC,OAAO,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,aAAa,EAAE,aAAa,CAAC;IACjG,OAAO,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC3C,GAAG,CAAC,UAAUC,MAAM,EAAE;MAC3CyC,eAAe,CAACrB,OAAO,CAAC,UAAUuB,YAAY,EAAE;QAC5C,IAAI3C,MAAM,CAACC,SAAS,CAAC5G,cAAc,CAACsJ,YAAY,CAAC,EAAE;UAC/C3C,MAAM,CAACC,SAAS,CAAC0C,YAAY,CAAC,GAAGH,MAAM,CAACG,YAAY,CAAC,CAACd,IAAI,CAACW,MAAM,CAAC;QACtE;MACJ,CAAC,CAAC;MACF,OAAOxC,MAAM;IACjB,CAAC,CAAC;EACN,CAAC;EAEDxD,UAAU,CAACpD,SAAS,CAACwJ,WAAW,GAAG,SAASA,WAAWA,CAACC,EAAE,EAAE;IACxD,IAAI,CAACC,IAAI,CAACC,MAAM,CAACC,KAAK,CAACH,EAAE,CAAC;IAC1B,IAAI,IAAI,CAACnG,KAAK,CAACuG,QAAQ,EAAE;MACrB,IAAI,CAACC,WAAW,CAACF,KAAK,CAAC,CAAC;IAC5B;IACA,IAAI,IAAI,CAACtG,KAAK,CAACyG,OAAO,EAAE;MACpB,IAAI,CAACzG,KAAK,CAACyG,OAAO,CAACN,EAAE,CAAC;IAC1B;EACJ,CAAC;EAEDrG,UAAU,CAACpD,SAAS,CAACgK,MAAM,GAAG,SAASA,MAAMA,CAACP,EAAE,EAAE;IAC9C,IAAI,CAACA,EAAE,IAAI,CAACA,EAAE,CAACQ,WAAW,IAAI,CAACR,EAAE,CAACQ,WAAW,CAACvK,MAAM,EAAE;MAClD;IACJ;IACA,IAAIwK,QAAQ,CAACC,aAAa,IAAID,QAAQ,CAACC,aAAa,CAACC,YAAY,CAAC,iBAAiB,CAAC,KAAK,MAAM,EAAE;MAC7F;IACJ;IACA,OAAO,IAAI,CAACR,KAAK,CAACH,EAAE,CAAC;EACzB,CAAC;EAEDrG,UAAU,CAACpD,SAAS,CAAC4J,KAAK,GAAG,SAASA,KAAKA,CAACH,EAAE,EAAE;IAC5C,IAAIY,MAAM,GAAG,IAAI;IAEjB,IAAIC,KAAK,GAAGb,EAAE,IAAIA,EAAE,CAACQ,WAAW;IAChC,IAAIK,KAAK,IAAIA,KAAK,CAAC5K,MAAM,KAAK,IAAI,CAAC6K,cAAc,EAAE;MAC/C,IAAIzG,WAAW,GAAG,IAAI,CAACC,KAAK,CAACD,WAAW;MAExC,IAAII,SAAS,GAAGJ,WAAW,CAACK,YAAY,CAAC,CAAC;MAC1C,IAAI,CAACD,SAAS,CAACsG,WAAW,CAAC,CAAC,EAAE;QAC1B,IAAItG,SAAS,CAACuG,WAAW,CAAC,CAAC,EAAE;UACzB,OAAO,IAAI,CAAC/B,QAAQ,CAAC;YACjB5E,WAAW,EAAEtC,WAAW,CAACkJ,kBAAkB,CAAC5G,WAAW;UAC3D,CAAC,EAAE,YAAY;YACXuG,MAAM,CAACb,WAAW,CAACC,EAAE,CAAC;UAC1B,CAAC,CAAC;QACN;MACJ;IACJ;IACA,IAAI,CAACD,WAAW,CAACC,EAAE,CAAC;EACxB,CAAC;EAEDrG,UAAU,CAACpD,SAAS,CAACsJ,UAAU,GAAG,SAASA,UAAUA,CAAA,EAAG;IACpD,OAAO,IAAI,CAACvF,KAAK,CAACgB,OAAO,CAAC4F,KAAK,CAAC,CAAC;EACrC,CAAC;EAEDvH,UAAU,CAACpD,SAAS,CAAC4K,eAAe,GAAG,SAASA,eAAeA,CAAA,EAAG;IAC9D,IAAIC,MAAM,GAAG,IAAI;IAEjB,IAAIC,aAAa,GAAG,CAAC,WAAW,EAAE,aAAa,EAAE,cAAc,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,kBAAkB,CAAC;IAClH,IAAIC,YAAY,GAAG,CAAC,CAAC;IACrBD,aAAa,CAAC9C,OAAO,CAAC,UAAUsC,KAAK,EAAE;MACnCS,YAAY,CAACT,KAAK,CAAC,GAAGO,MAAM,CAACG,qBAAqB,CAACV,KAAK,CAAC;IAC7D,CAAC,CAAC;IACF,OAAOS,YAAY;EACvB,CAAC;EAED3H,UAAU,CAACpD,SAAS,CAACwG,cAAc,GAAG,SAASA,cAAcA,CAAA,EAAG;IAC5D,IAAIyE,SAAS,GAAGrL,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKqF,SAAS,GAAGrF,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK;IAEzF,IAAIqL,SAAS,EAAE;MACX,IAAI,CAACvB,IAAI,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC;IAC5B;IACA,OAAO,IAAI,CAAC7F,KAAK,CAACD,WAAW;EACjC,CAAC;EAEDV,UAAU,CAACpD,SAAS,CAAC6E,cAAc,GAAG,SAASA,cAAcA,CAACf,WAAW,EAAE;IACvE,IAAIoH,MAAM,GAAG,IAAI;IAEjB,IAAI1B,WAAW,GAAG5J,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKqF,SAAS,GAAGrF,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK;IAC3F,IAAIuL,aAAa,GAAGvL,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKqF,SAAS,GAAGrF,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI;IAE5F,IAAIwL,cAAc,GAAGtH,WAAW;IAChC,IAAI,CAACwF,UAAU,CAAC,CAAC,CAACtB,OAAO,CAAC,UAAUpB,MAAM,EAAE;MACxC,IAAIA,MAAM,CAACyE,QAAQ,EAAE;QACjB,IAAInF,kBAAkB,GAAGU,MAAM,CAACyE,QAAQ,CAACD,cAAc,CAAC;QACxD,IAAIlF,kBAAkB,EAAE;UACpBkF,cAAc,GAAGlF,kBAAkB;QACvC;MACJ;IACJ,CAAC,CAAC;IACF,IAAI,IAAI,CAAC5C,KAAK,CAAC+H,QAAQ,IAAIF,aAAa,EAAE;MACtC,IAAI,CAAC7H,KAAK,CAAC+H,QAAQ,CAACD,cAAc,CAAC;MACnC;MACA;MACA;MACA;MACA;MACA;MACA,IAAI,IAAI,CAAC5F,cAAc,EAAE;QACrB,IAAI,CAAC9B,oBAAoB,GAAG4H,YAAY,CAAC,YAAY;UACjD,OAAOJ,MAAM,CAACxC,QAAQ,CAAC;YACnB5E,WAAW,EAAE,IAAItC,WAAW,CAAC0J,MAAM,CAACnH,KAAK,CAACD,WAAW,CAACyH,YAAY,CAAC,CAAC;UACxE,CAAC,CAAC;QACN,CAAC,CAAC;MACN;IACJ;IACA,IAAI,CAAC,IAAI,CAAC/F,cAAc,EAAE;MACtB,IAAI,CAACkD,QAAQ,CAAC;QAAE5E,WAAW,EAAEsH;MAAe,CAAC,EAAE5B,WAAW,GAAG,YAAY;QACrE,OAAO8B,YAAY,CAAC,YAAY;UAC5B,OAAOJ,MAAM,CAACxB,IAAI,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC;QACrC,CAAC,CAAC;MACN,CAAC,GAAGnH,IAAI,CAAC;IACb;EACJ,CAAC;EAEDW,UAAU,CAACpD,SAAS,CAACwL,gBAAgB,GAAG,SAASA,gBAAgBA,CAAC/B,EAAE,EAAE;IAClE,IAAI,IAAI,CAACnG,KAAK,CAACmI,SAAS,EAAE;MACtBhC,EAAE,CAACiC,OAAO,GAAGlJ,kBAAkB,CAACiH,EAAE,CAAC;MACnC,IAAIkC,aAAa,GAAG,IAAI,CAACrI,KAAK,CAACmI,SAAS,CAAChC,EAAE,CAAC;MAC5C,IAAIkC,aAAa,EAAE;QACf,OAAOA,aAAa;MACxB;MACA,OAAO/J,oBAAoB,CAAC6H,EAAE,CAAC;IACnC;IACA,OAAO7H,oBAAoB,CAAC6H,EAAE,CAAC;EACnC,CAAC;EAEDrG,UAAU,CAACpD,SAAS,CAAC4L,gBAAgB,GAAG,SAASA,gBAAgBA,CAACC,OAAO,EAAE;IACvE,IAAI,IAAI,CAACvI,KAAK,CAACwI,UAAU,EAAE;MACvB,OAAO,IAAI,CAACC,WAAW,CAAC,kBAAkB,EAAEF,OAAO,CAAC;IACxD;IACA,OAAOA,OAAO,KAAK,aAAa,GAAG,SAAS,GAAG,aAAa;EAChE,CAAC;EAEDzI,UAAU,CAACpD,SAAS,CAACgM,aAAa,GAAG,SAASA,aAAaA,CAACC,YAAY,EAAE;IACtE,IAAI3G,mBAAmB,GAAGnC,WAAW,CAAC8F,GAAG,CAAC,qBAAqB,CAAC;IAChE,IAAIiD,IAAI,GAAGD,YAAY,CAACE,OAAO,CAAC,CAAC;IACjC,IAAI7G,mBAAmB,CAACrF,cAAc,CAACiM,IAAI,CAAC,EAAE;MAC1C,OAAO5G,mBAAmB,CAAC4G,IAAI,CAAC;IACpC;IACA,OAAO,EAAE;EACb,CAAC;EAED9I,UAAU,CAACpD,SAAS,CAACoM,eAAe,GAAG,SAASA,eAAeA,CAACH,YAAY,EAAE;IAC1E,IAAII,iBAAiB,GAAG,IAAI;IAC5B,IAAI,CAAC/C,UAAU,CAAC,CAAC,CAACtB,OAAO,CAAC,UAAUpB,MAAM,EAAE;MACxC,IAAIA,MAAM,CAACwF,eAAe,EAAE;QACxB,IAAIE,MAAM,GAAG1F,MAAM,CAACwF,eAAe,CAACH,YAAY,CAAC;QACjD,IAAIK,MAAM,EAAE;UACRD,iBAAiB,GAAGC,MAAM;QAC9B;MACJ;IACJ,CAAC,CAAC;IACF,OAAOD,iBAAiB;EAC5B,CAAC;EAEDjJ,UAAU,CAACpD,SAAS,CAAC+L,WAAW,GAAG,SAASA,WAAWA,CAACQ,SAAS,EAAE;IAC/D,IAAIC,OAAO;IAEX,IAAIzH,OAAO,GAAG,IAAI,CAACuE,UAAU,CAAC,CAAC;IAE/B,KAAK,IAAImD,IAAI,GAAG7M,SAAS,CAACC,MAAM,EAAE6M,IAAI,GAAGC,KAAK,CAACF,IAAI,GAAG,CAAC,GAAGA,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,EAAEG,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGH,IAAI,EAAEG,KAAK,EAAE,EAAE;MACvGF,IAAI,CAACE,KAAK,GAAG,CAAC,CAAC,GAAGhN,SAAS,CAACgN,KAAK,CAAC;IACtC;IAEA,KAAK,IAAIjN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoF,OAAO,CAAClF,MAAM,EAAEF,CAAC,EAAE,EAAE;MACrC,IAAIiH,MAAM,GAAG7B,OAAO,CAACpF,CAAC,CAAC;MACvB,IAAIiH,MAAM,CAACC,SAAS,CAAC0F,SAAS,CAAC,IAAI,OAAO3F,MAAM,CAACC,SAAS,CAAC0F,SAAS,CAAC,KAAK,UAAU,EAAE;QAClF,IAAIM,iBAAiB;QAErB,IAAIP,MAAM,GAAG,CAACO,iBAAiB,GAAGjG,MAAM,CAACC,SAAS,EAAE0F,SAAS,CAAC,CAACO,KAAK,CAACD,iBAAiB,EAAEH,IAAI,CAAC;QAC7F,IAAIJ,MAAM,KAAK,IAAI,EAAE;UACjB,OAAO,SAAS;QACpB;MACJ;IACJ;IACA,OAAO,IAAI,CAAChJ,KAAK,CAACrD,cAAc,CAACsM,SAAS,CAAC,IAAI,CAACC,OAAO,GAAG,IAAI,CAAClJ,KAAK,EAAEiJ,SAAS,CAAC,CAACO,KAAK,CAACN,OAAO,EAAEE,IAAI,CAAC,KAAK,IAAI,GAAG,SAAS,GAAG,aAAa;EAC9I,CAAC;EAEDtJ,UAAU,CAACpD,SAAS,CAACgL,qBAAqB,GAAG,SAASA,qBAAqBA,CAACuB,SAAS,EAAE;IACnF,IAAIQ,MAAM,GAAG,IAAI;IAEjB,OAAO,YAAY;MACf,KAAK,IAAIC,KAAK,GAAGpN,SAAS,CAACC,MAAM,EAAE6M,IAAI,GAAGC,KAAK,CAACK,KAAK,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;QACvFP,IAAI,CAACO,KAAK,CAAC,GAAGrN,SAAS,CAACqN,KAAK,CAAC;MAClC;MAEA,OAAOF,MAAM,CAAChB,WAAW,CAACe,KAAK,CAACC,MAAM,EAAE,CAACR,SAAS,CAAC,CAAChF,MAAM,CAACmF,IAAI,CAAC,CAAC;IACrE,CAAC;EACL,CAAC;EAEDtJ,UAAU,CAACpD,SAAS,CAACwI,aAAa,GAAG,SAASA,aAAaA,CAAC0E,QAAQ,EAAE;IAClE,IAAIA,QAAQ,CAACxG,IAAI,KAAK,CAAC,EAAE;MACrB,OAAO,CAAC,CAAC;IACb;IACA,IAAI3B,OAAO,GAAG,IAAI,CAACuE,UAAU,CAAC,CAAC;IAC/B,IAAI6D,WAAW,GAAG,CAAC,CAAC;IACpB,KAAK,IAAIxN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoF,OAAO,CAAClF,MAAM,EAAEF,CAAC,EAAE,EAAE;MACrC,IAAIoF,OAAO,CAACpF,CAAC,CAAC,CAAC6I,aAAa,EAAE;QAC1B,IAAI4E,MAAM,GAAGrI,OAAO,CAACpF,CAAC,CAAC,CAAC6I,aAAa,CAAC0E,QAAQ,CAAC;QAC/C,IAAIE,MAAM,EAAE;UACR7N,QAAQ,CAAC4N,WAAW,EAAEC,MAAM,CAAC;QACjC;MACJ;IACJ;IACA,OAAOD,WAAW;EACtB,CAAC;EAED/J,UAAU,CAACpD,SAAS,CAACmJ,MAAM,GAAG,SAASA,MAAMA,CAAA,EAAG;IAC5C,IAAIkE,WAAW;MACXC,MAAM,GAAG,IAAI;IAEjB,IAAIC,OAAO,GAAG,IAAI,CAACjK,KAAK;MACpBkK,SAAS,GAAGD,OAAO,CAACC,SAAS;MAC7BC,QAAQ,GAAGF,OAAO,CAACE,QAAQ;MAC3BC,KAAK,GAAGH,OAAO,CAACG,KAAK;MACrB7D,QAAQ,GAAG0D,OAAO,CAAC1D,QAAQ;MAC3BiC,UAAU,GAAGyB,OAAO,CAACzB,UAAU;IACnC,IAAI6B,MAAM,GAAG,IAAI,CAAC5J,KAAK;MACnBD,WAAW,GAAG6J,MAAM,CAAC7J,WAAW;MAChCgE,cAAc,GAAG6F,MAAM,CAAC7F,cAAc;IAE1C,IAAIzC,cAAc,GAAGlC,WAAW,CAAC8F,GAAG,CAAC,gBAAgB,CAAC;IACtD,IAAId,cAAc,GAAGhF,WAAW,CAAC8F,GAAG,CAAC,gBAAgB,CAAC;IACtD,IAAI8B,YAAY,GAAG,IAAI,CAACH,eAAe,CAAC,CAAC;IACzC,IAAIgD,OAAO,GAAG1K,OAAO,CAAC6E,SAAS;IAC/B,IAAI8F,GAAG,GAAG5L,UAAU,EAAEoL,WAAW,GAAG,CAAC,CAAC,EAAEA,WAAW,CAACG,SAAS,GAAG,SAAS,CAAC,GAAG,IAAI,EAAEH,WAAW,CAACS,QAAQ,GAAGjE,QAAQ,EAAEwD,WAAW,CAACU,OAAO,GAAG,CAACjC,UAAU,EAAEuB,WAAW,CAAC,CAAC;IACpK,OAAOhM,KAAK,CAAC2M,aAAa,CACtB,KAAK,EACL;MAAEN,KAAK,EAAEA,KAAK;MAAEO,SAAS,EAAEJ,GAAG;MAAEK,OAAO,EAAE,IAAI,CAAClE,MAAM,CAACvB,IAAI,CAAC,IAAI;IAAE,CAAC,EACjEpH,KAAK,CAAC2M,aAAa,CAACJ,OAAO,EAAE;MAAE9J,WAAW,EAAEA,WAAW;MAAE0J,SAAS,EAAEA,SAAS;MAAES,SAAS,EAAET,SAAS,GAAG,UAAU;MAAEzI,OAAO,EAAE+C,cAAc;MAAE2F,QAAQ,EAAEA;IAAS,CAAC,CAAC,EAChKpM,KAAK,CAAC2M,aAAa,CACf,KAAK,EACL;MAAEC,SAAS,EAAET,SAAS,GAAG,iBAAiB;MAAEW,GAAG,EAAE,SAASA,GAAGA,CAACC,GAAG,EAAE;QAC3D,OAAOd,MAAM,CAAC/C,cAAc,GAAG6D,GAAG;MACtC,CAAC;MAAEV,KAAK,EAAEA,KAAK;MAAEQ,OAAO,EAAE,SAASA,OAAOA,CAACzE,EAAE,EAAE;QAC3C,OAAOA,EAAE,CAAC4E,cAAc,CAAC,CAAC;MAC9B;IAAE,CAAC,EACPhN,KAAK,CAAC2M,aAAa,CAACzM,MAAM,EAAEhC,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC+D,KAAK,EAAEyH,YAAY,EAAE;MAAEoD,GAAG,EAAE,QAAQ;MAAE9I,cAAc,EAAEA,cAAc;MAAEmD,aAAa,EAAE,IAAI,CAACA,aAAa,CAACC,IAAI,CAAC,IAAI,CAAC;MAAE3E,WAAW,EAAEA,WAAW;MAAE8H,gBAAgB,EAAE,IAAI,CAACA,gBAAgB,CAACnD,IAAI,CAAC,IAAI,CAAC;MAAE6F,YAAY,EAAE,IAAI,CAAC9C,gBAAgB,CAAC/C,IAAI,CAAC,IAAI,CAAC;MAAE4C,QAAQ,EAAE,IAAI,CAACxG,cAAc,CAAC4D,IAAI,CAAC,IAAI,CAAC;MAAE8F,YAAY,EAAE,IAAI,CAACvC,aAAa,CAACvD,IAAI,CAAC,IAAI,CAAC;MAAEN,cAAc,EAAEA,cAAc;MAAExE,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;MAAEyI,eAAe,EAAE,IAAI,CAACA,eAAe,CAAC3D,IAAI,CAAC,IAAI;IAAE,CAAC,CAAC,CAAC,EACpfoB,QAAQ,GAAGxI,KAAK,CAAC2M,aAAa,CAAC,OAAO,EAAE;MAAEN,KAAK,EAAE/K,eAAe;MAAEwL,GAAG,EAAE,SAASA,GAAGA,CAACC,GAAG,EAAE;QACjF,OAAOd,MAAM,CAACxD,WAAW,GAAGsE,GAAG;MACnC,CAAC;MAAEI,MAAM,EAAEzD,YAAY,CAACyD;IAAO,CAAC,CAAC,GAAG,IAAI,EAC5C,IAAI,CAAClL,KAAK,CAACmL,QACf,CACJ,CAAC;EACL,CAAC;EAED,OAAOrL,UAAU;AACrB,CAAC,CAAC/B,KAAK,CAACqN,SAAS,CAAC;AAElBtL,UAAU,CAACuL,OAAO,GAAGtM,UAAU;AAC/Be,UAAU,CAAChB,OAAO,GAAGA,OAAO,CAACe,WAAW,CAAC;AACzCC,UAAU,CAACwL,YAAY,GAAG;EACtB9C,UAAU,EAAE,IAAI;EAChB/G,OAAO,EAAE,EAAE;EACXyI,SAAS,EAAE,gBAAgB;EAC3B1G,YAAY,EAAE,CAAC,CAAC;EAChB2G,QAAQ,EAAE,EAAE;EACZoB,UAAU,EAAE;AAChB,CAAC;AACDzL,UAAU,CAAC0L,iBAAiB,GAAG;EAC3BtI,cAAc,EAAElF,SAAS,CAACyN,IAAI;EAC9BlK,cAAc,EAAEvD,SAAS,CAACyN;AAC9B,CAAC;AACD,eAAe3L,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}