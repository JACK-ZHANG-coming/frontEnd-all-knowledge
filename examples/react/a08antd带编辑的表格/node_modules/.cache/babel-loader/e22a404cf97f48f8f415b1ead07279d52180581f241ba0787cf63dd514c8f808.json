{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport ReactDOM from 'react-dom';\nimport scrollIntoView from 'dom-scroll-into-view';\nimport has from 'lodash/has';\nimport createBaseForm from './createBaseForm';\nimport { mixin as formMixin } from './createForm';\nimport { getParams } from './utils';\nfunction computedStyle(el, prop) {\n  var getComputedStyle = window.getComputedStyle;\n  var style =\n  // If we have getComputedStyle\n  getComputedStyle ?\n  // Query it\n  // TODO: From CSS-Query notes, we might need (node, null) for FF\n  getComputedStyle(el) :\n  // Otherwise, we are in IE and use currentStyle\n  el.currentStyle;\n  if (style) {\n    return style[\n    // Switch to camelCase for CSSOM\n    // DEV: Grabbed from jQuery\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/css.js#L191-L194\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L593-L597\n    prop.replace(/-(\\w)/gi, function (word, letter) {\n      return letter.toUpperCase();\n    })];\n  }\n  return undefined;\n}\nfunction getScrollableContainer(n) {\n  var node = n;\n  var nodeName = void 0;\n  /* eslint no-cond-assign:0 */\n  while ((nodeName = node.nodeName.toLowerCase()) !== 'body') {\n    var overflowY = computedStyle(node, 'overflowY');\n    // https://stackoverflow.com/a/36900407/3040605\n    if (node !== n && (overflowY === 'auto' || overflowY === 'scroll') && node.scrollHeight > node.clientHeight) {\n      return node;\n    }\n    node = node.parentNode;\n  }\n  return nodeName === 'body' ? node.ownerDocument : node;\n}\nvar mixin = {\n  getForm: function getForm() {\n    return _extends({}, formMixin.getForm.call(this), {\n      validateFieldsAndScroll: this.validateFieldsAndScroll\n    });\n  },\n  validateFieldsAndScroll: function validateFieldsAndScroll(ns, opt, cb) {\n    var _this = this;\n    var _getParams = getParams(ns, opt, cb),\n      names = _getParams.names,\n      callback = _getParams.callback,\n      options = _getParams.options;\n    var newCb = function newCb(error, values) {\n      if (error) {\n        var validNames = _this.fieldsStore.getValidFieldsName();\n        var firstNode = void 0;\n        var firstTop = void 0;\n        validNames.forEach(function (name) {\n          if (has(error, name)) {\n            var instance = _this.getFieldInstance(name);\n            if (instance) {\n              var node = ReactDOM.findDOMNode(instance);\n              var top = node.getBoundingClientRect().top;\n              if (node.type !== 'hidden' && (firstTop === undefined || firstTop > top)) {\n                firstTop = top;\n                firstNode = node;\n              }\n            }\n          }\n        });\n        if (firstNode) {\n          var c = options.container || getScrollableContainer(firstNode);\n          scrollIntoView(firstNode, c, _extends({\n            onlyScrollIfNeeded: true\n          }, options.scroll));\n        }\n      }\n      if (typeof callback === 'function') {\n        callback(error, values);\n      }\n    };\n    return this.validateFields(names, options, newCb);\n  }\n};\nfunction createDOMForm(option) {\n  return createBaseForm(_extends({}, option), [mixin]);\n}\nexport default createDOMForm;","map":{"version":3,"names":["_extends","ReactDOM","scrollIntoView","has","createBaseForm","mixin","formMixin","getParams","computedStyle","el","prop","getComputedStyle","window","style","currentStyle","replace","word","letter","toUpperCase","undefined","getScrollableContainer","n","node","nodeName","toLowerCase","overflowY","scrollHeight","clientHeight","parentNode","ownerDocument","getForm","call","validateFieldsAndScroll","ns","opt","cb","_this","_getParams","names","callback","options","newCb","error","values","validNames","fieldsStore","getValidFieldsName","firstNode","firstTop","forEach","name","instance","getFieldInstance","findDOMNode","top","getBoundingClientRect","type","c","container","onlyScrollIfNeeded","scroll","validateFields","createDOMForm","option"],"sources":["/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd带编辑的表格/node_modules/rc-form/es/createDOMForm.js"],"sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport ReactDOM from 'react-dom';\nimport scrollIntoView from 'dom-scroll-into-view';\nimport has from 'lodash/has';\nimport createBaseForm from './createBaseForm';\nimport { mixin as formMixin } from './createForm';\nimport { getParams } from './utils';\n\nfunction computedStyle(el, prop) {\n  var getComputedStyle = window.getComputedStyle;\n  var style =\n  // If we have getComputedStyle\n  getComputedStyle ?\n  // Query it\n  // TODO: From CSS-Query notes, we might need (node, null) for FF\n  getComputedStyle(el) :\n\n  // Otherwise, we are in IE and use currentStyle\n  el.currentStyle;\n  if (style) {\n    return style[\n    // Switch to camelCase for CSSOM\n    // DEV: Grabbed from jQuery\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/css.js#L191-L194\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L593-L597\n    prop.replace(/-(\\w)/gi, function (word, letter) {\n      return letter.toUpperCase();\n    })];\n  }\n  return undefined;\n}\n\nfunction getScrollableContainer(n) {\n  var node = n;\n  var nodeName = void 0;\n  /* eslint no-cond-assign:0 */\n  while ((nodeName = node.nodeName.toLowerCase()) !== 'body') {\n    var overflowY = computedStyle(node, 'overflowY');\n    // https://stackoverflow.com/a/36900407/3040605\n    if (node !== n && (overflowY === 'auto' || overflowY === 'scroll') && node.scrollHeight > node.clientHeight) {\n      return node;\n    }\n    node = node.parentNode;\n  }\n  return nodeName === 'body' ? node.ownerDocument : node;\n}\n\nvar mixin = {\n  getForm: function getForm() {\n    return _extends({}, formMixin.getForm.call(this), {\n      validateFieldsAndScroll: this.validateFieldsAndScroll\n    });\n  },\n  validateFieldsAndScroll: function validateFieldsAndScroll(ns, opt, cb) {\n    var _this = this;\n\n    var _getParams = getParams(ns, opt, cb),\n        names = _getParams.names,\n        callback = _getParams.callback,\n        options = _getParams.options;\n\n    var newCb = function newCb(error, values) {\n      if (error) {\n        var validNames = _this.fieldsStore.getValidFieldsName();\n        var firstNode = void 0;\n        var firstTop = void 0;\n\n        validNames.forEach(function (name) {\n          if (has(error, name)) {\n            var instance = _this.getFieldInstance(name);\n            if (instance) {\n              var node = ReactDOM.findDOMNode(instance);\n              var top = node.getBoundingClientRect().top;\n              if (node.type !== 'hidden' && (firstTop === undefined || firstTop > top)) {\n                firstTop = top;\n                firstNode = node;\n              }\n            }\n          }\n        });\n\n        if (firstNode) {\n          var c = options.container || getScrollableContainer(firstNode);\n          scrollIntoView(firstNode, c, _extends({\n            onlyScrollIfNeeded: true\n          }, options.scroll));\n        }\n      }\n\n      if (typeof callback === 'function') {\n        callback(error, values);\n      }\n    };\n\n    return this.validateFields(names, options, newCb);\n  }\n};\n\nfunction createDOMForm(option) {\n  return createBaseForm(_extends({}, option), [mixin]);\n}\n\nexport default createDOMForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}