{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport CalendarPart from './range-calendar/CalendarPart';\nimport TodayButton from './calendar/TodayButton';\nimport OkButton from './calendar/OkButton';\nimport TimePickerButton from './calendar/TimePickerButton';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\nfunction noop() {}\nfunction isEmptyArray(arr) {\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\n    return !i;\n  }));\n}\nfunction isArraysEqual(a, b) {\n  if (a === b) return true;\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\n    return false;\n  }\n  if (a.length !== b.length) return false;\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\nfunction getValueFromSelectedValue(selectedValue) {\n  var start = selectedValue[0],\n    end = selectedValue[1];\n  if (end && (start === undefined || start === null)) {\n    start = end.clone().subtract(1, 'month');\n  }\n  if (start && (end === undefined || end === null)) {\n    end = start.clone().add(1, 'month');\n  }\n  return [start, end];\n}\nfunction normalizeAnchor(props, init) {\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\n  var value = props.value || init && props.defaultValue;\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\n}\nfunction generateOptions(length, extraOptionGen) {\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\n  for (var value = 0; value < length; value++) {\n    if (arr.indexOf(value) === -1) {\n      arr.push(value);\n    }\n  }\n  return arr;\n}\nfunction onInputSelect(direction, value, cause) {\n  if (!value) {\n    return;\n  }\n  var originalValue = this.state.selectedValue;\n  var selectedValue = originalValue.concat();\n  var index = direction === 'left' ? 0 : 1;\n  selectedValue[index] = value;\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\n  }\n  this.props.onInputSelect(selectedValue);\n  this.fireSelectValueChange(selectedValue, null, cause || {\n    source: 'dateInput'\n  });\n}\nvar RangeCalendar = function (_React$Component) {\n  _inherits(RangeCalendar, _React$Component);\n  function RangeCalendar(props) {\n    _classCallCheck(this, RangeCalendar);\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n    _initialiseProps.call(_this);\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\n    var value = normalizeAnchor(props, 1);\n    _this.state = {\n      selectedValue: selectedValue,\n      prevSelectedValue: selectedValue,\n      firstSelectedValue: null,\n      hoverValue: props.hoverValue || [],\n      value: value,\n      showTimePicker: false,\n      mode: props.mode || ['date', 'date'],\n      panelTriggerSource: '' // Trigger by which picker panel: 'start' & 'end'\n    };\n\n    return _this;\n  }\n  RangeCalendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var newState = {};\n    if ('value' in nextProps) {\n      newState.value = normalizeAnchor(nextProps, 0);\n    }\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\n      newState.hoverValue = nextProps.hoverValue;\n    }\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = nextProps.selectedValue;\n      newState.prevSelectedValue = nextProps.selectedValue;\n    }\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\n      newState.mode = nextProps.mode;\n    }\n    return newState;\n  };\n\n  // get disabled hours for second picker\n\n  RangeCalendar.prototype.render = function render() {\n    var _className, _classnames;\n    var props = this.props,\n      state = this.state;\n    var prefixCls = props.prefixCls,\n      dateInputPlaceholder = props.dateInputPlaceholder,\n      seperator = props.seperator,\n      timePicker = props.timePicker,\n      showOk = props.showOk,\n      locale = props.locale,\n      showClear = props.showClear,\n      showToday = props.showToday,\n      type = props.type,\n      clearIcon = props.clearIcon;\n    var hoverValue = state.hoverValue,\n      selectedValue = state.selectedValue,\n      mode = state.mode,\n      showTimePicker = state.showTimePicker;\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\n    var classes = classnames(className);\n    var newProps = {\n      selectedValue: state.selectedValue,\n      onSelect: this.onSelect,\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\n    };\n    var placeholder1 = void 0;\n    var placeholder2 = void 0;\n    if (dateInputPlaceholder) {\n      if (Array.isArray(dateInputPlaceholder)) {\n        placeholder1 = dateInputPlaceholder[0];\n        placeholder2 = dateInputPlaceholder[1];\n      } else {\n        placeholder1 = placeholder2 = dateInputPlaceholder;\n      }\n    }\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\n    var startValue = this.getStartValue();\n    var endValue = this.getEndValue();\n    var todayTime = getTodayTime(startValue);\n    var thisMonth = todayTime.month();\n    var thisYear = todayTime.year();\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month();\n    var extraFooter = props.renderFooter();\n    return React.createElement('div', {\n      ref: this.saveRoot,\n      className: classes,\n      style: props.style,\n      tabIndex: '0',\n      onKeyDown: this.onKeyDown\n    }, props.renderSidebar(), React.createElement('div', {\n      className: prefixCls + '-panel'\n    }, showClear && selectedValue[0] && selectedValue[1] ? React.createElement('a', {\n      role: 'button',\n      title: locale.clear,\n      onClick: this.clear\n    }, clearIcon || React.createElement('span', {\n      className: prefixCls + '-clear-btn'\n    })) : null, React.createElement('div', {\n      className: prefixCls + '-date-panel',\n      onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\n      onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\n    }, React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'left',\n      disabledTime: this.disabledStartTime,\n      disabledMonth: this.disabledStartMonth,\n      format: this.getFormat(),\n      value: startValue,\n      mode: mode[0],\n      placeholder: placeholder1,\n      onInputChange: this.onStartInputChange,\n      onInputSelect: this.onStartInputSelect,\n      onValueChange: this.onStartValueChange,\n      onPanelChange: this.onStartPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker || mode[0] === 'time',\n      enablePrev: true,\n      enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1]),\n      clearIcon: clearIcon\n    })), React.createElement('span', {\n      className: prefixCls + '-range-middle'\n    }, seperator), React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'right',\n      format: this.getFormat(),\n      timePickerDisabledTime: this.getEndDisableTime(),\n      placeholder: placeholder2,\n      value: endValue,\n      mode: mode[1],\n      onInputChange: this.onEndInputChange,\n      onInputSelect: this.onEndInputSelect,\n      onValueChange: this.onEndValueChange,\n      onPanelChange: this.onEndPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker || mode[1] === 'time',\n      disabledTime: this.disabledEndTime,\n      disabledMonth: this.disabledEndMonth,\n      enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\n      enableNext: true,\n      clearIcon: clearIcon\n    }))), React.createElement('div', {\n      className: cls\n    }, showToday || props.timePicker || showOkButton || extraFooter ? React.createElement('div', {\n      className: prefixCls + '-footer-btn'\n    }, extraFooter, showToday ? React.createElement(TodayButton, _extends({}, props, {\n      disabled: isTodayInView,\n      value: state.value[0],\n      onToday: this.onToday,\n      text: locale.backToToday\n    })) : null, props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\n      showTimePicker: showTimePicker || mode[0] === 'time' && mode[1] === 'time',\n      onOpenTimePicker: this.onOpenTimePicker,\n      onCloseTimePicker: this.onCloseTimePicker,\n      timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\n    })) : null, showOkButton ? React.createElement(OkButton, _extends({}, props, {\n      onOk: this.onOk,\n      okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\n    })) : null) : null)));\n  };\n  return RangeCalendar;\n}(React.Component);\nRangeCalendar.propTypes = _extends({}, propType, {\n  prefixCls: PropTypes.string,\n  dateInputPlaceholder: PropTypes.any,\n  seperator: PropTypes.string,\n  defaultValue: PropTypes.any,\n  value: PropTypes.any,\n  hoverValue: PropTypes.any,\n  mode: PropTypes.arrayOf(PropTypes.oneOf(['time', 'date', 'month', 'year', 'decade'])),\n  showDateInput: PropTypes.bool,\n  timePicker: PropTypes.any,\n  showOk: PropTypes.bool,\n  showToday: PropTypes.bool,\n  defaultSelectedValue: PropTypes.array,\n  selectedValue: PropTypes.array,\n  onOk: PropTypes.func,\n  showClear: PropTypes.bool,\n  locale: PropTypes.object,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onValueChange: PropTypes.func,\n  onHoverChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  format: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  onClear: PropTypes.func,\n  type: PropTypes.any,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.func,\n  clearIcon: PropTypes.node,\n  onKeyDown: PropTypes.func\n});\nRangeCalendar.defaultProps = _extends({}, defaultProp, {\n  type: 'both',\n  seperator: '~',\n  defaultSelectedValue: [],\n  onValueChange: noop,\n  onHoverChange: noop,\n  onPanelChange: noop,\n  disabledTime: noop,\n  onInputSelect: noop,\n  showToday: true,\n  showDateInput: true\n});\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n  this.onDatePanelEnter = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange(_this2.state.selectedValue.concat());\n    }\n  };\n  this.onDatePanelLeave = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange([]);\n    }\n  };\n  this.onSelect = function (value) {\n    var type = _this2.props.type;\n    var _state = _this2.state,\n      selectedValue = _state.selectedValue,\n      prevSelectedValue = _state.prevSelectedValue,\n      firstSelectedValue = _state.firstSelectedValue;\n    var nextSelectedValue = void 0;\n    if (type === 'both') {\n      if (!firstSelectedValue) {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      } else if (_this2.compare(firstSelectedValue, value) < 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [firstSelectedValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        syncTime(prevSelectedValue[1], firstSelectedValue);\n        nextSelectedValue = [value, firstSelectedValue];\n      }\n    } else if (type === 'start') {\n      syncTime(prevSelectedValue[0], value);\n      var endValue = selectedValue[1];\n      nextSelectedValue = endValue && _this2.compare(endValue, value) > 0 ? [value, endValue] : [value];\n    } else {\n      // type === 'end'\n      var startValue = selectedValue[0];\n      if (startValue && _this2.compare(startValue, value) <= 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [startValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      }\n    }\n    _this2.fireSelectValueChange(nextSelectedValue);\n  };\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return;\n    }\n    var keyCode = event.keyCode;\n    var ctrlKey = event.ctrlKey || event.metaKey;\n    var _state2 = _this2.state,\n      selectedValue = _state2.selectedValue,\n      hoverValue = _state2.hoverValue,\n      firstSelectedValue = _state2.firstSelectedValue,\n      value = _state2.value;\n    var _props = _this2.props,\n      onKeyDown = _props.onKeyDown,\n      disabledDate = _props.disabledDate;\n\n    // Update last time of the picker\n\n    var updateHoverPoint = function updateHoverPoint(func) {\n      // Change hover to make focus in UI\n      var currentHoverTime = void 0;\n      var nextHoverTime = void 0;\n      var nextHoverValue = void 0;\n      if (!firstSelectedValue) {\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\n        nextHoverTime = func(currentHoverTime);\n        nextHoverValue = [nextHoverTime];\n        _this2.fireHoverValueChange(nextHoverValue);\n      } else {\n        if (hoverValue.length === 1) {\n          currentHoverTime = hoverValue[0].clone();\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        } else {\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        }\n      }\n\n      // Find origin hover time on value index\n      if (nextHoverValue.length >= 2) {\n        var miss = nextHoverValue.some(function (ht) {\n          return !includesTime(value, ht, 'month');\n        });\n        if (miss) {\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\n            return t1.valueOf() - t2.valueOf();\n          });\n          if (newValue[0].isSame(newValue[1], 'month')) {\n            newValue[1] = newValue[0].clone().add(1, 'month');\n          }\n          _this2.fireValueChange(newValue);\n        }\n      } else if (nextHoverValue.length === 1) {\n        // If only one value, let's keep the origin panel\n        var oriValueIndex = value.findIndex(function (time) {\n          return time.isSame(currentHoverTime, 'month');\n        });\n        if (oriValueIndex === -1) oriValueIndex = 0;\n        if (value.every(function (time) {\n          return !time.isSame(nextHoverTime, 'month');\n        })) {\n          var _newValue = value.slice();\n          _newValue[oriValueIndex] = nextHoverTime.clone();\n          _this2.fireValueChange(_newValue);\n        }\n      }\n      event.preventDefault();\n      return nextHoverTime;\n    };\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'weeks');\n        });\n        return;\n      case KeyCode.UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'weeks');\n        });\n        return;\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'days');\n          });\n        }\n        return;\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'days');\n          });\n        }\n        return;\n      case KeyCode.HOME:\n        updateHoverPoint(function (time) {\n          return goStartMonth(time);\n        });\n        return;\n      case KeyCode.END:\n        updateHoverPoint(function (time) {\n          return goEndMonth(time);\n        });\n        return;\n      case KeyCode.PAGE_DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'month');\n        });\n        return;\n      case KeyCode.PAGE_UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'month');\n        });\n        return;\n      case KeyCode.ENTER:\n        {\n          var lastValue = void 0;\n          if (hoverValue.length === 0) {\n            lastValue = updateHoverPoint(function (time) {\n              return time;\n            });\n          } else if (hoverValue.length === 1) {\n            lastValue = hoverValue[0];\n          } else {\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          }\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\n            _this2.onSelect(lastValue);\n          }\n          event.preventDefault();\n          return;\n        }\n      default:\n        if (onKeyDown) {\n          onKeyDown(event);\n        }\n    }\n  };\n  this.onDayHover = function (value) {\n    var hoverValue = [];\n    var _state3 = _this2.state,\n      selectedValue = _state3.selectedValue,\n      firstSelectedValue = _state3.firstSelectedValue;\n    var type = _this2.props.type;\n    if (type === 'start' && selectedValue[1]) {\n      hoverValue = _this2.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\n    } else if (type === 'end' && selectedValue[0]) {\n      hoverValue = _this2.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\n    } else {\n      if (!firstSelectedValue) {\n        if (_this2.state.hoverValue.length) {\n          _this2.setState({\n            hoverValue: []\n          });\n        }\n        return hoverValue;\n      }\n      hoverValue = _this2.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\n    }\n    _this2.fireHoverValueChange(hoverValue);\n    return hoverValue;\n  };\n  this.onToday = function () {\n    var startValue = getTodayTime(_this2.state.value[0]);\n    var endValue = startValue.clone().add(1, 'months');\n    _this2.setState({\n      value: [startValue, endValue]\n    });\n  };\n  this.onOpenTimePicker = function () {\n    _this2.setState({\n      showTimePicker: true\n    });\n  };\n  this.onCloseTimePicker = function () {\n    _this2.setState({\n      showTimePicker: false\n    });\n  };\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n    if (_this2.isAllowedDateAndTime(selectedValue)) {\n      _this2.props.onOk(_this2.state.selectedValue);\n    }\n  };\n  this.onStartInputChange = function () {\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\n      oargs[_key] = arguments[_key];\n    }\n    var args = ['left'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n  this.onEndInputChange = function () {\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      oargs[_key2] = arguments[_key2];\n    }\n    var args = ['right'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n  this.onStartInputSelect = function (value) {\n    var args = ['left', value, {\n      source: 'dateInputSelect'\n    }];\n    return onInputSelect.apply(_this2, args);\n  };\n  this.onEndInputSelect = function (value) {\n    var args = ['right', value, {\n      source: 'dateInputSelect'\n    }];\n    return onInputSelect.apply(_this2, args);\n  };\n  this.onStartValueChange = function (leftValue) {\n    var value = [].concat(_this2.state.value);\n    value[0] = leftValue;\n    return _this2.fireValueChange(value);\n  };\n  this.onEndValueChange = function (rightValue) {\n    var value = [].concat(_this2.state.value);\n    value[1] = rightValue;\n    return _this2.fireValueChange(value);\n  };\n  this.onStartPanelChange = function (value, mode) {\n    var props = _this2.props,\n      state = _this2.state;\n    var newMode = [mode, state.mode[1]];\n    var newState = {\n      panelTriggerSource: 'start'\n    };\n    if (!('mode' in props)) {\n      newState.mode = newMode;\n    }\n    _this2.setState(newState);\n    var newValue = [value || state.value[0], state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n  this.onEndPanelChange = function (value, mode) {\n    var props = _this2.props,\n      state = _this2.state;\n    var newMode = [state.mode[0], mode];\n    var newState = {\n      panelTriggerSource: 'end'\n    };\n    if (!('mode' in props)) {\n      newState.mode = newMode;\n    }\n    _this2.setState(newState);\n    var newValue = [state.value[0], value || state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n  this.getStartValue = function () {\n    var _state4 = _this2.state,\n      selectedValue = _state4.selectedValue,\n      showTimePicker = _state4.showTimePicker,\n      value = _state4.value,\n      mode = _state4.mode,\n      panelTriggerSource = _state4.panelTriggerSource;\n    var startValue = value[0];\n    // keep selectedTime when select date\n    if (selectedValue[0] && _this2.props.timePicker) {\n      startValue = startValue.clone();\n      syncTime(selectedValue[0], startValue);\n    }\n    if (showTimePicker && selectedValue[0]) {\n      startValue = selectedValue[0];\n    }\n\n    // Adjust month if date not align\n    if (panelTriggerSource === 'end' && mode[0] === 'date' && mode[1] === 'date' && startValue.isSame(value[1], 'month')) {\n      startValue = startValue.clone().subtract(1, 'month');\n    }\n    return startValue;\n  };\n  this.getEndValue = function () {\n    var _state5 = _this2.state,\n      value = _state5.value,\n      selectedValue = _state5.selectedValue,\n      showTimePicker = _state5.showTimePicker,\n      mode = _state5.mode,\n      panelTriggerSource = _state5.panelTriggerSource;\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month');\n    // keep selectedTime when select date\n    if (selectedValue[1] && _this2.props.timePicker) {\n      syncTime(selectedValue[1], endValue);\n    }\n    if (showTimePicker) {\n      endValue = selectedValue[1] ? selectedValue[1] : _this2.getStartValue();\n    }\n\n    // Adjust month if date not align\n    if (!showTimePicker && panelTriggerSource !== 'end' && mode[0] === 'date' && mode[1] === 'date' && endValue.isSame(value[0], 'month')) {\n      endValue = endValue.clone().add(1, 'month');\n    }\n    return endValue;\n  };\n  this.getEndDisableTime = function () {\n    var _state6 = _this2.state,\n      selectedValue = _state6.selectedValue,\n      value = _state6.value;\n    var disabledTime = _this2.props.disabledTime;\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\n    var startValue = selectedValue && selectedValue[0] || value[0].clone();\n    // if startTime and endTime is same day..\n    // the second time picker will not able to pick time before first time picker\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\n      var hours = startValue.hour();\n      var minutes = startValue.minute();\n      var second = startValue.second();\n      var _disabledHours = userSettingDisabledTime.disabledHours,\n        _disabledMinutes = userSettingDisabledTime.disabledMinutes,\n        _disabledSeconds = userSettingDisabledTime.disabledSeconds;\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\n      _disabledHours = generateOptions(hours, _disabledHours);\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\n      return {\n        disabledHours: function disabledHours() {\n          return _disabledHours;\n        },\n        disabledMinutes: function disabledMinutes(hour) {\n          if (hour === hours) {\n            return _disabledMinutes;\n          }\n          return oldDisabledMinutes;\n        },\n        disabledSeconds: function disabledSeconds(hour, minute) {\n          if (hour === hours && minute === minutes) {\n            return _disabledSeconds;\n          }\n          return olddisabledSeconds;\n        }\n      };\n    }\n    return userSettingDisabledTime;\n  };\n  this.isAllowedDateAndTime = function (selectedValue) {\n    return isAllowedDate(selectedValue[0], _this2.props.disabledDate, _this2.disabledStartTime) && isAllowedDate(selectedValue[1], _this2.props.disabledDate, _this2.disabledEndTime);\n  };\n  this.isMonthYearPanelShow = function (mode) {\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\n  };\n  this.hasSelectedValue = function () {\n    var selectedValue = _this2.state.selectedValue;\n    return !!selectedValue[1] && !!selectedValue[0];\n  };\n  this.compare = function (v1, v2) {\n    if (_this2.props.timePicker) {\n      return v1.diff(v2);\n    }\n    return v1.diff(v2, 'days');\n  };\n  this.fireSelectValueChange = function (selectedValue, direct, cause) {\n    var timePicker = _this2.props.timePicker;\n    var prevSelectedValue = _this2.state.prevSelectedValue;\n    if (timePicker && timePicker.props.defaultValue) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n      if (!prevSelectedValue[0] && selectedValue[0]) {\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\n      }\n      if (!prevSelectedValue[1] && selectedValue[1]) {\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\n      }\n    }\n    if (!('selectedValue' in _this2.props)) {\n      _this2.setState({\n        selectedValue: selectedValue\n      });\n    }\n\n    // 尚未选择过时间，直接输入的话\n    if (!_this2.state.selectedValue[0] || !_this2.state.selectedValue[1]) {\n      var startValue = selectedValue[0] || moment();\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\n      _this2.setState({\n        selectedValue: selectedValue,\n        value: getValueFromSelectedValue([startValue, endValue])\n      });\n    }\n    if (selectedValue[0] && !selectedValue[1]) {\n      _this2.setState({\n        firstSelectedValue: selectedValue[0]\n      });\n      _this2.fireHoverValueChange(selectedValue.concat());\n    }\n    _this2.props.onChange(selectedValue);\n    if (direct || selectedValue[0] && selectedValue[1]) {\n      _this2.setState({\n        prevSelectedValue: selectedValue,\n        firstSelectedValue: null\n      });\n      _this2.fireHoverValueChange([]);\n      _this2.props.onSelect(selectedValue, cause);\n    }\n  };\n  this.fireValueChange = function (value) {\n    var props = _this2.props;\n    if (!('value' in props)) {\n      _this2.setState({\n        value: value\n      });\n    }\n    props.onValueChange(value);\n  };\n  this.fireHoverValueChange = function (hoverValue) {\n    var props = _this2.props;\n    if (!('hoverValue' in props)) {\n      _this2.setState({\n        hoverValue: hoverValue\n      });\n    }\n    props.onHoverChange(hoverValue);\n  };\n  this.clear = function () {\n    _this2.fireSelectValueChange([], true);\n    _this2.props.onClear();\n  };\n  this.disabledStartTime = function (time) {\n    return _this2.props.disabledTime(time, 'start');\n  };\n  this.disabledEndTime = function (time) {\n    return _this2.props.disabledTime(time, 'end');\n  };\n  this.disabledStartMonth = function (month) {\n    var value = _this2.state.value;\n    return month.isAfter(value[1], 'month');\n  };\n  this.disabledEndMonth = function (month) {\n    var value = _this2.state.value;\n    return month.isBefore(value[0], 'month');\n  };\n};\npolyfill(RangeCalendar);\nexport default commonMixinWrapper(RangeCalendar);","map":{"version":3,"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","PropTypes","moment","classnames","polyfill","KeyCode","CalendarPart","TodayButton","OkButton","TimePickerButton","commonMixinWrapper","propType","defaultProp","syncTime","getTodayTime","isAllowedDate","goTime","goStartMonth","goEndMonth","includesTime","noop","isEmptyArray","arr","Array","isArray","length","every","i","isArraysEqual","a","b","getValueFromSelectedValue","selectedValue","start","end","undefined","clone","subtract","add","normalizeAnchor","props","init","defaultSelectedValue","value","defaultValue","normalizedValue","generateOptions","extraOptionGen","concat","indexOf","push","onInputSelect","direction","cause","originalValue","state","index","compare","showTimePicker","fireSelectValueChange","source","RangeCalendar","_React$Component","_this","call","_initialiseProps","prevSelectedValue","firstSelectedValue","hoverValue","mode","panelTriggerSource","getDerivedStateFromProps","nextProps","newState","prototype","render","_className","_classnames","prefixCls","dateInputPlaceholder","seperator","timePicker","showOk","locale","showClear","showToday","type","clearIcon","className","visible","showWeekNumber","classes","newProps","onSelect","onDayHover","placeholder1","placeholder2","showOkButton","cls","startValue","getStartValue","endValue","getEndValue","todayTime","thisMonth","month","thisYear","year","isTodayInView","nextMonthOfStart","isClosestMonths","extraFooter","renderFooter","createElement","ref","saveRoot","style","tabIndex","onKeyDown","renderSidebar","role","title","clear","onClick","onMouseLeave","onDatePanelLeave","onMouseEnter","onDatePanelEnter","disabledTime","disabledStartTime","disabledMonth","disabledStartMonth","format","getFormat","placeholder","onInputChange","onStartInputChange","onStartInputSelect","onValueChange","onStartValueChange","onPanelChange","onStartPanelChange","showDateInput","enablePrev","enableNext","isMonthYearPanelShow","timePickerDisabledTime","getEndDisableTime","onEndInputChange","onEndInputSelect","onEndValueChange","onEndPanelChange","disabledEndTime","disabledEndMonth","disabled","onToday","text","backToToday","onOpenTimePicker","onCloseTimePicker","timePickerDisabled","hasSelectedValue","onOk","okDisabled","isAllowedDateAndTime","Component","propTypes","string","any","arrayOf","oneOf","bool","array","func","object","onChange","onHoverChange","oneOfType","onClear","disabledDate","node","defaultProps","_this2","fireHoverValueChange","_state","nextSelectedValue","event","target","nodeName","toLowerCase","keyCode","ctrlKey","metaKey","_state2","_props","updateHoverPoint","currentHoverTime","nextHoverTime","nextHoverValue","isSame","miss","some","ht","newValue","slice","sort","t1","t2","valueOf","fireValueChange","oriValueIndex","findIndex","time","_newValue","preventDefault","DOWN","UP","LEFT","RIGHT","HOME","END","PAGE_DOWN","PAGE_UP","ENTER","lastValue","_state3","setState","_len","arguments","oargs","_key","args","apply","_len2","_key2","leftValue","rightValue","newMode","_state4","_state5","_state6","userSettingDisabledTime","hours","hour","minutes","minute","second","_disabledHours","disabledHours","_disabledMinutes","disabledMinutes","_disabledSeconds","disabledSeconds","oldDisabledMinutes","olddisabledSeconds","v1","v2","diff","direct","timePickerDefaultValue","isAfter","isBefore"],"sources":["/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd带编辑的表格/node_modules/rc-calendar/es/RangeCalendar.js"],"sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport CalendarPart from './range-calendar/CalendarPart';\nimport TodayButton from './calendar/TodayButton';\nimport OkButton from './calendar/OkButton';\nimport TimePickerButton from './calendar/TimePickerButton';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\n\nfunction noop() {}\n\nfunction isEmptyArray(arr) {\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\n    return !i;\n  }));\n}\n\nfunction isArraysEqual(a, b) {\n  if (a === b) return true;\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\n    return false;\n  }\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction getValueFromSelectedValue(selectedValue) {\n  var start = selectedValue[0],\n      end = selectedValue[1];\n\n  if (end && (start === undefined || start === null)) {\n    start = end.clone().subtract(1, 'month');\n  }\n\n  if (start && (end === undefined || end === null)) {\n    end = start.clone().add(1, 'month');\n  }\n  return [start, end];\n}\n\nfunction normalizeAnchor(props, init) {\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\n  var value = props.value || init && props.defaultValue;\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\n}\n\nfunction generateOptions(length, extraOptionGen) {\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\n  for (var value = 0; value < length; value++) {\n    if (arr.indexOf(value) === -1) {\n      arr.push(value);\n    }\n  }\n  return arr;\n}\n\nfunction onInputSelect(direction, value, cause) {\n  if (!value) {\n    return;\n  }\n  var originalValue = this.state.selectedValue;\n  var selectedValue = originalValue.concat();\n  var index = direction === 'left' ? 0 : 1;\n  selectedValue[index] = value;\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\n  }\n  this.props.onInputSelect(selectedValue);\n  this.fireSelectValueChange(selectedValue, null, cause || { source: 'dateInput' });\n}\n\nvar RangeCalendar = function (_React$Component) {\n  _inherits(RangeCalendar, _React$Component);\n\n  function RangeCalendar(props) {\n    _classCallCheck(this, RangeCalendar);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\n    var value = normalizeAnchor(props, 1);\n    _this.state = {\n      selectedValue: selectedValue,\n      prevSelectedValue: selectedValue,\n      firstSelectedValue: null,\n      hoverValue: props.hoverValue || [],\n      value: value,\n      showTimePicker: false,\n      mode: props.mode || ['date', 'date'],\n      panelTriggerSource: '' // Trigger by which picker panel: 'start' & 'end'\n    };\n    return _this;\n  }\n\n  RangeCalendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var newState = {};\n    if ('value' in nextProps) {\n      newState.value = normalizeAnchor(nextProps, 0);\n    }\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\n      newState.hoverValue = nextProps.hoverValue;\n    }\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = nextProps.selectedValue;\n      newState.prevSelectedValue = nextProps.selectedValue;\n    }\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\n      newState.mode = nextProps.mode;\n    }\n    return newState;\n  };\n\n  // get disabled hours for second picker\n\n\n  RangeCalendar.prototype.render = function render() {\n    var _className, _classnames;\n\n    var props = this.props,\n        state = this.state;\n    var prefixCls = props.prefixCls,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        seperator = props.seperator,\n        timePicker = props.timePicker,\n        showOk = props.showOk,\n        locale = props.locale,\n        showClear = props.showClear,\n        showToday = props.showToday,\n        type = props.type,\n        clearIcon = props.clearIcon;\n    var hoverValue = state.hoverValue,\n        selectedValue = state.selectedValue,\n        mode = state.mode,\n        showTimePicker = state.showTimePicker;\n\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\n    var classes = classnames(className);\n    var newProps = {\n      selectedValue: state.selectedValue,\n      onSelect: this.onSelect,\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\n    };\n\n    var placeholder1 = void 0;\n    var placeholder2 = void 0;\n\n    if (dateInputPlaceholder) {\n      if (Array.isArray(dateInputPlaceholder)) {\n        placeholder1 = dateInputPlaceholder[0];\n        placeholder2 = dateInputPlaceholder[1];\n      } else {\n        placeholder1 = placeholder2 = dateInputPlaceholder;\n      }\n    }\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\n\n    var startValue = this.getStartValue();\n    var endValue = this.getEndValue();\n    var todayTime = getTodayTime(startValue);\n    var thisMonth = todayTime.month();\n    var thisYear = todayTime.year();\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month();\n\n    var extraFooter = props.renderFooter();\n\n    return React.createElement(\n      'div',\n      {\n        ref: this.saveRoot,\n        className: classes,\n        style: props.style,\n        tabIndex: '0',\n        onKeyDown: this.onKeyDown\n      },\n      props.renderSidebar(),\n      React.createElement(\n        'div',\n        { className: prefixCls + '-panel' },\n        showClear && selectedValue[0] && selectedValue[1] ? React.createElement(\n          'a',\n          {\n            role: 'button',\n            title: locale.clear,\n            onClick: this.clear\n          },\n          clearIcon || React.createElement('span', { className: prefixCls + '-clear-btn' })\n        ) : null,\n        React.createElement(\n          'div',\n          {\n            className: prefixCls + '-date-panel',\n            onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\n            onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\n          },\n          React.createElement(CalendarPart, _extends({}, props, newProps, {\n            hoverValue: hoverValue,\n            direction: 'left',\n            disabledTime: this.disabledStartTime,\n            disabledMonth: this.disabledStartMonth,\n            format: this.getFormat(),\n            value: startValue,\n            mode: mode[0],\n            placeholder: placeholder1,\n            onInputChange: this.onStartInputChange,\n            onInputSelect: this.onStartInputSelect,\n            onValueChange: this.onStartValueChange,\n            onPanelChange: this.onStartPanelChange,\n            showDateInput: this.props.showDateInput,\n            timePicker: timePicker,\n            showTimePicker: showTimePicker || mode[0] === 'time',\n            enablePrev: true,\n            enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1]),\n            clearIcon: clearIcon\n          })),\n          React.createElement(\n            'span',\n            { className: prefixCls + '-range-middle' },\n            seperator\n          ),\n          React.createElement(CalendarPart, _extends({}, props, newProps, {\n            hoverValue: hoverValue,\n            direction: 'right',\n            format: this.getFormat(),\n            timePickerDisabledTime: this.getEndDisableTime(),\n            placeholder: placeholder2,\n            value: endValue,\n            mode: mode[1],\n            onInputChange: this.onEndInputChange,\n            onInputSelect: this.onEndInputSelect,\n            onValueChange: this.onEndValueChange,\n            onPanelChange: this.onEndPanelChange,\n            showDateInput: this.props.showDateInput,\n            timePicker: timePicker,\n            showTimePicker: showTimePicker || mode[1] === 'time',\n            disabledTime: this.disabledEndTime,\n            disabledMonth: this.disabledEndMonth,\n            enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\n            enableNext: true,\n            clearIcon: clearIcon\n          }))\n        ),\n        React.createElement(\n          'div',\n          { className: cls },\n          showToday || props.timePicker || showOkButton || extraFooter ? React.createElement(\n            'div',\n            { className: prefixCls + '-footer-btn' },\n            extraFooter,\n            showToday ? React.createElement(TodayButton, _extends({}, props, {\n              disabled: isTodayInView,\n              value: state.value[0],\n              onToday: this.onToday,\n              text: locale.backToToday\n            })) : null,\n            props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\n              showTimePicker: showTimePicker || mode[0] === 'time' && mode[1] === 'time',\n              onOpenTimePicker: this.onOpenTimePicker,\n              onCloseTimePicker: this.onCloseTimePicker,\n              timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\n            })) : null,\n            showOkButton ? React.createElement(OkButton, _extends({}, props, {\n              onOk: this.onOk,\n              okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\n            })) : null\n          ) : null\n        )\n      )\n    );\n  };\n\n  return RangeCalendar;\n}(React.Component);\n\nRangeCalendar.propTypes = _extends({}, propType, {\n  prefixCls: PropTypes.string,\n  dateInputPlaceholder: PropTypes.any,\n  seperator: PropTypes.string,\n  defaultValue: PropTypes.any,\n  value: PropTypes.any,\n  hoverValue: PropTypes.any,\n  mode: PropTypes.arrayOf(PropTypes.oneOf(['time', 'date', 'month', 'year', 'decade'])),\n  showDateInput: PropTypes.bool,\n  timePicker: PropTypes.any,\n  showOk: PropTypes.bool,\n  showToday: PropTypes.bool,\n  defaultSelectedValue: PropTypes.array,\n  selectedValue: PropTypes.array,\n  onOk: PropTypes.func,\n  showClear: PropTypes.bool,\n  locale: PropTypes.object,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onValueChange: PropTypes.func,\n  onHoverChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  format: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  onClear: PropTypes.func,\n  type: PropTypes.any,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.func,\n  clearIcon: PropTypes.node,\n  onKeyDown: PropTypes.func\n});\nRangeCalendar.defaultProps = _extends({}, defaultProp, {\n  type: 'both',\n  seperator: '~',\n  defaultSelectedValue: [],\n  onValueChange: noop,\n  onHoverChange: noop,\n  onPanelChange: noop,\n  disabledTime: noop,\n  onInputSelect: noop,\n  showToday: true,\n  showDateInput: true\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onDatePanelEnter = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange(_this2.state.selectedValue.concat());\n    }\n  };\n\n  this.onDatePanelLeave = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange([]);\n    }\n  };\n\n  this.onSelect = function (value) {\n    var type = _this2.props.type;\n    var _state = _this2.state,\n        selectedValue = _state.selectedValue,\n        prevSelectedValue = _state.prevSelectedValue,\n        firstSelectedValue = _state.firstSelectedValue;\n\n    var nextSelectedValue = void 0;\n    if (type === 'both') {\n      if (!firstSelectedValue) {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      } else if (_this2.compare(firstSelectedValue, value) < 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [firstSelectedValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        syncTime(prevSelectedValue[1], firstSelectedValue);\n        nextSelectedValue = [value, firstSelectedValue];\n      }\n    } else if (type === 'start') {\n      syncTime(prevSelectedValue[0], value);\n      var endValue = selectedValue[1];\n      nextSelectedValue = endValue && _this2.compare(endValue, value) > 0 ? [value, endValue] : [value];\n    } else {\n      // type === 'end'\n      var startValue = selectedValue[0];\n      if (startValue && _this2.compare(startValue, value) <= 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [startValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      }\n    }\n\n    _this2.fireSelectValueChange(nextSelectedValue);\n  };\n\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return;\n    }\n\n    var keyCode = event.keyCode;\n\n    var ctrlKey = event.ctrlKey || event.metaKey;\n\n    var _state2 = _this2.state,\n        selectedValue = _state2.selectedValue,\n        hoverValue = _state2.hoverValue,\n        firstSelectedValue = _state2.firstSelectedValue,\n        value = _state2.value;\n    var _props = _this2.props,\n        onKeyDown = _props.onKeyDown,\n        disabledDate = _props.disabledDate;\n\n    // Update last time of the picker\n\n    var updateHoverPoint = function updateHoverPoint(func) {\n      // Change hover to make focus in UI\n      var currentHoverTime = void 0;\n      var nextHoverTime = void 0;\n      var nextHoverValue = void 0;\n\n      if (!firstSelectedValue) {\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\n        nextHoverTime = func(currentHoverTime);\n        nextHoverValue = [nextHoverTime];\n        _this2.fireHoverValueChange(nextHoverValue);\n      } else {\n        if (hoverValue.length === 1) {\n          currentHoverTime = hoverValue[0].clone();\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        } else {\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        }\n      }\n\n      // Find origin hover time on value index\n      if (nextHoverValue.length >= 2) {\n        var miss = nextHoverValue.some(function (ht) {\n          return !includesTime(value, ht, 'month');\n        });\n        if (miss) {\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\n            return t1.valueOf() - t2.valueOf();\n          });\n          if (newValue[0].isSame(newValue[1], 'month')) {\n            newValue[1] = newValue[0].clone().add(1, 'month');\n          }\n          _this2.fireValueChange(newValue);\n        }\n      } else if (nextHoverValue.length === 1) {\n        // If only one value, let's keep the origin panel\n        var oriValueIndex = value.findIndex(function (time) {\n          return time.isSame(currentHoverTime, 'month');\n        });\n        if (oriValueIndex === -1) oriValueIndex = 0;\n\n        if (value.every(function (time) {\n          return !time.isSame(nextHoverTime, 'month');\n        })) {\n          var _newValue = value.slice();\n          _newValue[oriValueIndex] = nextHoverTime.clone();\n          _this2.fireValueChange(_newValue);\n        }\n      }\n\n      event.preventDefault();\n\n      return nextHoverTime;\n    };\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'weeks');\n        });\n        return;\n      case KeyCode.UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'weeks');\n        });\n        return;\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'days');\n          });\n        }\n        return;\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'days');\n          });\n        }\n        return;\n      case KeyCode.HOME:\n        updateHoverPoint(function (time) {\n          return goStartMonth(time);\n        });\n        return;\n      case KeyCode.END:\n        updateHoverPoint(function (time) {\n          return goEndMonth(time);\n        });\n        return;\n      case KeyCode.PAGE_DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'month');\n        });\n        return;\n      case KeyCode.PAGE_UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'month');\n        });\n        return;\n      case KeyCode.ENTER:\n        {\n          var lastValue = void 0;\n          if (hoverValue.length === 0) {\n            lastValue = updateHoverPoint(function (time) {\n              return time;\n            });\n          } else if (hoverValue.length === 1) {\n            lastValue = hoverValue[0];\n          } else {\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          }\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\n            _this2.onSelect(lastValue);\n          }\n          event.preventDefault();\n          return;\n        }\n      default:\n        if (onKeyDown) {\n          onKeyDown(event);\n        }\n    }\n  };\n\n  this.onDayHover = function (value) {\n    var hoverValue = [];\n    var _state3 = _this2.state,\n        selectedValue = _state3.selectedValue,\n        firstSelectedValue = _state3.firstSelectedValue;\n    var type = _this2.props.type;\n\n    if (type === 'start' && selectedValue[1]) {\n      hoverValue = _this2.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\n    } else if (type === 'end' && selectedValue[0]) {\n      hoverValue = _this2.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\n    } else {\n      if (!firstSelectedValue) {\n        if (_this2.state.hoverValue.length) {\n          _this2.setState({ hoverValue: [] });\n        }\n        return hoverValue;\n      }\n      hoverValue = _this2.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\n    }\n    _this2.fireHoverValueChange(hoverValue);\n\n    return hoverValue;\n  };\n\n  this.onToday = function () {\n    var startValue = getTodayTime(_this2.state.value[0]);\n    var endValue = startValue.clone().add(1, 'months');\n    _this2.setState({ value: [startValue, endValue] });\n  };\n\n  this.onOpenTimePicker = function () {\n    _this2.setState({\n      showTimePicker: true\n    });\n  };\n\n  this.onCloseTimePicker = function () {\n    _this2.setState({\n      showTimePicker: false\n    });\n  };\n\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    if (_this2.isAllowedDateAndTime(selectedValue)) {\n      _this2.props.onOk(_this2.state.selectedValue);\n    }\n  };\n\n  this.onStartInputChange = function () {\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\n      oargs[_key] = arguments[_key];\n    }\n\n    var args = ['left'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onEndInputChange = function () {\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      oargs[_key2] = arguments[_key2];\n    }\n\n    var args = ['right'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onStartInputSelect = function (value) {\n    var args = ['left', value, { source: 'dateInputSelect' }];\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onEndInputSelect = function (value) {\n    var args = ['right', value, { source: 'dateInputSelect' }];\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onStartValueChange = function (leftValue) {\n    var value = [].concat(_this2.state.value);\n    value[0] = leftValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onEndValueChange = function (rightValue) {\n    var value = [].concat(_this2.state.value);\n    value[1] = rightValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onStartPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n\n    var newMode = [mode, state.mode[1]];\n    var newState = {\n      panelTriggerSource: 'start'\n    };\n    if (!('mode' in props)) {\n      newState.mode = newMode;\n    }\n    _this2.setState(newState);\n    var newValue = [value || state.value[0], state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.onEndPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n\n    var newMode = [state.mode[0], mode];\n    var newState = {\n      panelTriggerSource: 'end'\n    };\n    if (!('mode' in props)) {\n      newState.mode = newMode;\n    }\n    _this2.setState(newState);\n    var newValue = [state.value[0], value || state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.getStartValue = function () {\n    var _state4 = _this2.state,\n        selectedValue = _state4.selectedValue,\n        showTimePicker = _state4.showTimePicker,\n        value = _state4.value,\n        mode = _state4.mode,\n        panelTriggerSource = _state4.panelTriggerSource;\n\n    var startValue = value[0];\n    // keep selectedTime when select date\n    if (selectedValue[0] && _this2.props.timePicker) {\n      startValue = startValue.clone();\n      syncTime(selectedValue[0], startValue);\n    }\n    if (showTimePicker && selectedValue[0]) {\n      startValue = selectedValue[0];\n    }\n\n    // Adjust month if date not align\n    if (panelTriggerSource === 'end' && mode[0] === 'date' && mode[1] === 'date' && startValue.isSame(value[1], 'month')) {\n      startValue = startValue.clone().subtract(1, 'month');\n    }\n\n    return startValue;\n  };\n\n  this.getEndValue = function () {\n    var _state5 = _this2.state,\n        value = _state5.value,\n        selectedValue = _state5.selectedValue,\n        showTimePicker = _state5.showTimePicker,\n        mode = _state5.mode,\n        panelTriggerSource = _state5.panelTriggerSource;\n\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month');\n    // keep selectedTime when select date\n    if (selectedValue[1] && _this2.props.timePicker) {\n      syncTime(selectedValue[1], endValue);\n    }\n    if (showTimePicker) {\n      endValue = selectedValue[1] ? selectedValue[1] : _this2.getStartValue();\n    }\n\n    // Adjust month if date not align\n    if (!showTimePicker && panelTriggerSource !== 'end' && mode[0] === 'date' && mode[1] === 'date' && endValue.isSame(value[0], 'month')) {\n      endValue = endValue.clone().add(1, 'month');\n    }\n\n    return endValue;\n  };\n\n  this.getEndDisableTime = function () {\n    var _state6 = _this2.state,\n        selectedValue = _state6.selectedValue,\n        value = _state6.value;\n    var disabledTime = _this2.props.disabledTime;\n\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\n    var startValue = selectedValue && selectedValue[0] || value[0].clone();\n    // if startTime and endTime is same day..\n    // the second time picker will not able to pick time before first time picker\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\n      var hours = startValue.hour();\n      var minutes = startValue.minute();\n      var second = startValue.second();\n      var _disabledHours = userSettingDisabledTime.disabledHours,\n          _disabledMinutes = userSettingDisabledTime.disabledMinutes,\n          _disabledSeconds = userSettingDisabledTime.disabledSeconds;\n\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\n      _disabledHours = generateOptions(hours, _disabledHours);\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\n      return {\n        disabledHours: function disabledHours() {\n          return _disabledHours;\n        },\n        disabledMinutes: function disabledMinutes(hour) {\n          if (hour === hours) {\n            return _disabledMinutes;\n          }\n          return oldDisabledMinutes;\n        },\n        disabledSeconds: function disabledSeconds(hour, minute) {\n          if (hour === hours && minute === minutes) {\n            return _disabledSeconds;\n          }\n          return olddisabledSeconds;\n        }\n      };\n    }\n    return userSettingDisabledTime;\n  };\n\n  this.isAllowedDateAndTime = function (selectedValue) {\n    return isAllowedDate(selectedValue[0], _this2.props.disabledDate, _this2.disabledStartTime) && isAllowedDate(selectedValue[1], _this2.props.disabledDate, _this2.disabledEndTime);\n  };\n\n  this.isMonthYearPanelShow = function (mode) {\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\n  };\n\n  this.hasSelectedValue = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    return !!selectedValue[1] && !!selectedValue[0];\n  };\n\n  this.compare = function (v1, v2) {\n    if (_this2.props.timePicker) {\n      return v1.diff(v2);\n    }\n    return v1.diff(v2, 'days');\n  };\n\n  this.fireSelectValueChange = function (selectedValue, direct, cause) {\n    var timePicker = _this2.props.timePicker;\n    var prevSelectedValue = _this2.state.prevSelectedValue;\n\n    if (timePicker && timePicker.props.defaultValue) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n      if (!prevSelectedValue[0] && selectedValue[0]) {\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\n      }\n      if (!prevSelectedValue[1] && selectedValue[1]) {\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\n      }\n    }\n\n    if (!('selectedValue' in _this2.props)) {\n      _this2.setState({\n        selectedValue: selectedValue\n      });\n    }\n\n    // 尚未选择过时间，直接输入的话\n    if (!_this2.state.selectedValue[0] || !_this2.state.selectedValue[1]) {\n      var startValue = selectedValue[0] || moment();\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\n      _this2.setState({\n        selectedValue: selectedValue,\n        value: getValueFromSelectedValue([startValue, endValue])\n      });\n    }\n\n    if (selectedValue[0] && !selectedValue[1]) {\n      _this2.setState({ firstSelectedValue: selectedValue[0] });\n      _this2.fireHoverValueChange(selectedValue.concat());\n    }\n    _this2.props.onChange(selectedValue);\n    if (direct || selectedValue[0] && selectedValue[1]) {\n      _this2.setState({\n        prevSelectedValue: selectedValue,\n        firstSelectedValue: null\n      });\n      _this2.fireHoverValueChange([]);\n      _this2.props.onSelect(selectedValue, cause);\n    }\n  };\n\n  this.fireValueChange = function (value) {\n    var props = _this2.props;\n    if (!('value' in props)) {\n      _this2.setState({\n        value: value\n      });\n    }\n    props.onValueChange(value);\n  };\n\n  this.fireHoverValueChange = function (hoverValue) {\n    var props = _this2.props;\n    if (!('hoverValue' in props)) {\n      _this2.setState({ hoverValue: hoverValue });\n    }\n    props.onHoverChange(hoverValue);\n  };\n\n  this.clear = function () {\n    _this2.fireSelectValueChange([], true);\n    _this2.props.onClear();\n  };\n\n  this.disabledStartTime = function (time) {\n    return _this2.props.disabledTime(time, 'start');\n  };\n\n  this.disabledEndTime = function (time) {\n    return _this2.props.disabledTime(time, 'end');\n  };\n\n  this.disabledStartMonth = function (month) {\n    var value = _this2.state.value;\n\n    return month.isAfter(value[1], 'month');\n  };\n\n  this.disabledEndMonth = function (month) {\n    var value = _this2.state.value;\n\n    return month.isBefore(value[0], 'month');\n  };\n};\n\npolyfill(RangeCalendar);\n\nexport default commonMixinWrapper(RangeCalendar);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}