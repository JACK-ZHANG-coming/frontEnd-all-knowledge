{"ast":null,"code":"/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule applyEntityToContentState\n * @format\n * \n */\n\n'use strict';\n\nvar Immutable = require('immutable');\nvar applyEntityToContentBlock = require('./applyEntityToContentBlock');\nfunction applyEntityToContentState(contentState, selectionState, entityKey) {\n  var blockMap = contentState.getBlockMap();\n  var startKey = selectionState.getStartKey();\n  var startOffset = selectionState.getStartOffset();\n  var endKey = selectionState.getEndKey();\n  var endOffset = selectionState.getEndOffset();\n  var newBlocks = blockMap.skipUntil(function (_, k) {\n    return k === startKey;\n  }).takeUntil(function (_, k) {\n    return k === endKey;\n  }).toOrderedMap().merge(Immutable.OrderedMap([[endKey, blockMap.get(endKey)]])).map(function (block, blockKey) {\n    var sliceStart = blockKey === startKey ? startOffset : 0;\n    var sliceEnd = blockKey === endKey ? endOffset : block.getLength();\n    return applyEntityToContentBlock(block, sliceStart, sliceEnd, entityKey);\n  });\n  return contentState.merge({\n    blockMap: blockMap.merge(newBlocks),\n    selectionBefore: selectionState,\n    selectionAfter: selectionState\n  });\n}\nmodule.exports = applyEntityToContentState;","map":{"version":3,"names":["Immutable","require","applyEntityToContentBlock","applyEntityToContentState","contentState","selectionState","entityKey","blockMap","getBlockMap","startKey","getStartKey","startOffset","getStartOffset","endKey","getEndKey","endOffset","getEndOffset","newBlocks","skipUntil","_","k","takeUntil","toOrderedMap","merge","OrderedMap","get","map","block","blockKey","sliceStart","sliceEnd","getLength","selectionBefore","selectionAfter","module","exports"],"sources":["/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd带编辑的表格/node_modules/rc-editor-core/node_modules/draft-js/lib/applyEntityToContentState.js"],"sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule applyEntityToContentState\n * @format\n * \n */\n\n'use strict';\n\nvar Immutable = require('immutable');\n\nvar applyEntityToContentBlock = require('./applyEntityToContentBlock');\n\nfunction applyEntityToContentState(contentState, selectionState, entityKey) {\n  var blockMap = contentState.getBlockMap();\n  var startKey = selectionState.getStartKey();\n  var startOffset = selectionState.getStartOffset();\n  var endKey = selectionState.getEndKey();\n  var endOffset = selectionState.getEndOffset();\n\n  var newBlocks = blockMap.skipUntil(function (_, k) {\n    return k === startKey;\n  }).takeUntil(function (_, k) {\n    return k === endKey;\n  }).toOrderedMap().merge(Immutable.OrderedMap([[endKey, blockMap.get(endKey)]])).map(function (block, blockKey) {\n    var sliceStart = blockKey === startKey ? startOffset : 0;\n    var sliceEnd = blockKey === endKey ? endOffset : block.getLength();\n    return applyEntityToContentBlock(block, sliceStart, sliceEnd, entityKey);\n  });\n\n  return contentState.merge({\n    blockMap: blockMap.merge(newBlocks),\n    selectionBefore: selectionState,\n    selectionAfter: selectionState\n  });\n}\n\nmodule.exports = applyEntityToContentState;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,SAAS,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEpC,IAAIC,yBAAyB,GAAGD,OAAO,CAAC,6BAA6B,CAAC;AAEtE,SAASE,yBAAyBA,CAACC,YAAY,EAAEC,cAAc,EAAEC,SAAS,EAAE;EAC1E,IAAIC,QAAQ,GAAGH,YAAY,CAACI,WAAW,CAAC,CAAC;EACzC,IAAIC,QAAQ,GAAGJ,cAAc,CAACK,WAAW,CAAC,CAAC;EAC3C,IAAIC,WAAW,GAAGN,cAAc,CAACO,cAAc,CAAC,CAAC;EACjD,IAAIC,MAAM,GAAGR,cAAc,CAACS,SAAS,CAAC,CAAC;EACvC,IAAIC,SAAS,GAAGV,cAAc,CAACW,YAAY,CAAC,CAAC;EAE7C,IAAIC,SAAS,GAAGV,QAAQ,CAACW,SAAS,CAAC,UAAUC,CAAC,EAAEC,CAAC,EAAE;IACjD,OAAOA,CAAC,KAAKX,QAAQ;EACvB,CAAC,CAAC,CAACY,SAAS,CAAC,UAAUF,CAAC,EAAEC,CAAC,EAAE;IAC3B,OAAOA,CAAC,KAAKP,MAAM;EACrB,CAAC,CAAC,CAACS,YAAY,CAAC,CAAC,CAACC,KAAK,CAACvB,SAAS,CAACwB,UAAU,CAAC,CAAC,CAACX,MAAM,EAAEN,QAAQ,CAACkB,GAAG,CAACZ,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAACa,GAAG,CAAC,UAAUC,KAAK,EAAEC,QAAQ,EAAE;IAC7G,IAAIC,UAAU,GAAGD,QAAQ,KAAKnB,QAAQ,GAAGE,WAAW,GAAG,CAAC;IACxD,IAAImB,QAAQ,GAAGF,QAAQ,KAAKf,MAAM,GAAGE,SAAS,GAAGY,KAAK,CAACI,SAAS,CAAC,CAAC;IAClE,OAAO7B,yBAAyB,CAACyB,KAAK,EAAEE,UAAU,EAAEC,QAAQ,EAAExB,SAAS,CAAC;EAC1E,CAAC,CAAC;EAEF,OAAOF,YAAY,CAACmB,KAAK,CAAC;IACxBhB,QAAQ,EAAEA,QAAQ,CAACgB,KAAK,CAACN,SAAS,CAAC;IACnCe,eAAe,EAAE3B,cAAc;IAC/B4B,cAAc,EAAE5B;EAClB,CAAC,CAAC;AACJ;AAEA6B,MAAM,CAACC,OAAO,GAAGhC,yBAAyB"},"metadata":{},"sourceType":"script","externalDependencies":[]}