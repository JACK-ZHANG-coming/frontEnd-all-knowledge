{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport _Suggestions from '../component/Suggestions.react';\nimport SuggestionPortal from '../component/SuggestionPortal.react';\nimport MentionContent from '../component/MentionContent.react';\nimport mentionStore from '../model/mentionStore';\nimport exportContent from './exportContent';\nimport getRegExp from '../utils/getRegExp';\nfunction findWithRegex(regex, contentBlock, callback) {\n  // Get the text from the contentBlock\n  var text = contentBlock.getText();\n  var matchArr = void 0;\n  var start = void 0; // eslint-disable-line\n  var end = void 0;\n  // Go through all matches in the text and return the indizes to the callback\n  while ((matchArr = regex.exec(text)) !== null) {\n    // eslint-disable-line\n    start = matchArr.index;\n    end = start + matchArr[0].length;\n    callback(start, end);\n    if (start === end) break;\n  }\n}\nfunction mentionContentStrategy(contentBlock, callback, contentState) {\n  contentBlock.findEntityRanges(function (character) {\n    var entityKey = character.getEntity();\n    return entityKey && contentState.getEntity(entityKey).getType() === 'mention';\n  }, callback);\n}\nfunction noop() {}\nvar MentionContentComponent = function MentionContentComponent(props) {\n  var entityKey = props.entityKey,\n    tag = props.tag,\n    callbacks = props.callbacks;\n  var contentState = callbacks.getEditorState().getCurrentContent();\n  var data = contentState.getEntity(entityKey).getData();\n  return React.createElement(tag, _extends({}, props, {\n    data: data\n  }));\n};\nexport default function createMention() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var callbacks = {\n    onChange: noop,\n    onUpArrow: noop,\n    onDownArrow: noop,\n    getEditorState: noop,\n    setEditorState: noop,\n    handleReturn: noop,\n    onBlur: noop\n  };\n  var componentProps = {\n    callbacks: callbacks,\n    mentionStore: mentionStore\n  };\n  var suggestionRegex = getRegExp(config.prefix);\n  var tag = config.tag || MentionContent;\n  var decorators = [{\n    strategy: function strategy(contentBlock, callback) {\n      findWithRegex(suggestionRegex, contentBlock, callback);\n    },\n    component: function component(props) {\n      return React.createElement(SuggestionPortal, _extends({}, props, componentProps, {\n        style: config.mentionStyle,\n        suggestionRegex: getRegExp(config.prefix)\n      }));\n    }\n  }];\n  if (config.mode === 'immutable') {\n    decorators.unshift({\n      strategy: mentionContentStrategy,\n      component: function component(props) {\n        return React.createElement(MentionContentComponent, _extends({\n          tag: tag\n        }, props, {\n          callbacks: callbacks\n        }));\n      }\n    });\n  }\n  return {\n    name: 'mention',\n    Suggestions: function Suggestions(props) {\n      return React.createElement(_Suggestions, _extends({}, props, componentProps, {\n        store: mentionStore\n      }));\n    },\n    decorators: decorators,\n    onChange: function onChange(editorState) {\n      return callbacks.onChange ? callbacks.onChange(editorState) : editorState;\n    },\n    callbacks: callbacks,\n    'export': exportContent\n  };\n}","map":{"version":3,"names":["_extends","React","_Suggestions","SuggestionPortal","MentionContent","mentionStore","exportContent","getRegExp","findWithRegex","regex","contentBlock","callback","text","getText","matchArr","start","end","exec","index","length","mentionContentStrategy","contentState","findEntityRanges","character","entityKey","getEntity","getType","noop","MentionContentComponent","props","tag","callbacks","getEditorState","getCurrentContent","data","getData","createElement","createMention","config","arguments","undefined","onChange","onUpArrow","onDownArrow","setEditorState","handleReturn","onBlur","componentProps","suggestionRegex","prefix","decorators","strategy","component","style","mentionStyle","mode","unshift","name","Suggestions","store","editorState"],"sources":["/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd带编辑的表格/node_modules/rc-editor-mention/es/utils/createMention.js"],"sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport _Suggestions from '../component/Suggestions.react';\nimport SuggestionPortal from '../component/SuggestionPortal.react';\nimport MentionContent from '../component/MentionContent.react';\nimport mentionStore from '../model/mentionStore';\nimport exportContent from './exportContent';\nimport getRegExp from '../utils/getRegExp';\n\nfunction findWithRegex(regex, contentBlock, callback) {\n  // Get the text from the contentBlock\n  var text = contentBlock.getText();\n  var matchArr = void 0;\n  var start = void 0; // eslint-disable-line\n  var end = void 0;\n  // Go through all matches in the text and return the indizes to the callback\n  while ((matchArr = regex.exec(text)) !== null) {\n    // eslint-disable-line\n    start = matchArr.index;\n    end = start + matchArr[0].length;\n    callback(start, end);\n    if (start === end) break;\n  }\n}\n\nfunction mentionContentStrategy(contentBlock, callback, contentState) {\n  contentBlock.findEntityRanges(function (character) {\n    var entityKey = character.getEntity();\n    return entityKey && contentState.getEntity(entityKey).getType() === 'mention';\n  }, callback);\n}\n\nfunction noop() {}\n\nvar MentionContentComponent = function MentionContentComponent(props) {\n  var entityKey = props.entityKey,\n      tag = props.tag,\n      callbacks = props.callbacks;\n\n  var contentState = callbacks.getEditorState().getCurrentContent();\n  var data = contentState.getEntity(entityKey).getData();\n  return React.createElement(tag, _extends({}, props, { data: data }));\n};\n\nexport default function createMention() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var callbacks = {\n    onChange: noop,\n    onUpArrow: noop,\n    onDownArrow: noop,\n    getEditorState: noop,\n    setEditorState: noop,\n    handleReturn: noop,\n    onBlur: noop\n  };\n  var componentProps = {\n    callbacks: callbacks,\n    mentionStore: mentionStore\n  };\n  var suggestionRegex = getRegExp(config.prefix);\n\n  var tag = config.tag || MentionContent;\n  var decorators = [{\n    strategy: function strategy(contentBlock, callback) {\n      findWithRegex(suggestionRegex, contentBlock, callback);\n    },\n    component: function component(props) {\n      return React.createElement(SuggestionPortal, _extends({}, props, componentProps, {\n        style: config.mentionStyle,\n        suggestionRegex: getRegExp(config.prefix)\n      }));\n    }\n  }];\n  if (config.mode === 'immutable') {\n    decorators.unshift({\n      strategy: mentionContentStrategy,\n      component: function component(props) {\n        return React.createElement(MentionContentComponent, _extends({ tag: tag }, props, { callbacks: callbacks }));\n      }\n    });\n  }\n\n  return {\n    name: 'mention',\n    Suggestions: function Suggestions(props) {\n      return React.createElement(_Suggestions, _extends({}, props, componentProps, {\n        store: mentionStore\n      }));\n    },\n    decorators: decorators,\n    onChange: function onChange(editorState) {\n      return callbacks.onChange ? callbacks.onChange(editorState) : editorState;\n    },\n    callbacks: callbacks,\n    'export': exportContent\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}