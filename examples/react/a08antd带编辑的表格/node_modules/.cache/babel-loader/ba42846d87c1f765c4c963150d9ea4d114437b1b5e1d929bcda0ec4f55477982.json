{"ast":null,"code":"import _objectSpread from\"/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd\\u5E26\\u7F16\\u8F91\\u7684\\u8868\\u683C/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd\\u5E26\\u7F16\\u8F91\\u7684\\u8868\\u683C/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _classCallCheck from\"/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd\\u5E26\\u7F16\\u8F91\\u7684\\u8868\\u683C/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd\\u5E26\\u7F16\\u8F91\\u7684\\u8868\\u683C/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd\\u5E26\\u7F16\\u8F91\\u7684\\u8868\\u683C/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd\\u5E26\\u7F16\\u8F91\\u7684\\u8868\\u683C/node_modules/@babel/runtime/helpers/esm/createSuper.js\";var _excluded=[\"isOver\",\"connectDragSource\",\"connectDropTarget\",\"moveRow\"];/**拖拽表格 */import React from'react';import'antd/dist/antd.css';import'./index.css';import{Table}from'antd';import{DndProvider,DragSource,DropTarget}from'react-dnd';import{HTML5Backend}from'react-dnd-html5-backend';import update from'immutability-helper';import{jsx as _jsx}from\"react/jsx-runtime\";var dragingIndex=-1;var BodyRow=/*#__PURE__*/function(_React$Component){_inherits(BodyRow,_React$Component);var _super=_createSuper(BodyRow);function BodyRow(){_classCallCheck(this,BodyRow);return _super.apply(this,arguments);}_createClass(BodyRow,[{key:\"render\",value:function render(){var _this$props=this.props,isOver=_this$props.isOver,connectDragSource=_this$props.connectDragSource,connectDropTarget=_this$props.connectDropTarget,moveRow=_this$props.moveRow,restProps=_objectWithoutProperties(_this$props,_excluded);var style=_objectSpread(_objectSpread({},restProps.style),{},{cursor:'move'});var className=restProps.className;if(isOver){if(restProps.index>dragingIndex){className+=' drop-over-downward';}if(restProps.index<dragingIndex){className+=' drop-over-upward';}}return connectDragSource(connectDropTarget(/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},restProps),{},{className:className,style:style}))));}}]);return BodyRow;}(React.Component);var rowSource={beginDrag:function beginDrag(props){dragingIndex=props.index;return{index:props.index};}};var rowTarget={drop:function drop(props,monitor){var dragIndex=monitor.getItem().index;var hoverIndex=props.index;// Don't replace items with themselves\nif(dragIndex===hoverIndex){return;}// Time to actually perform the action\nprops.moveRow(dragIndex,hoverIndex);// Note: we're mutating the monitor item here!\n// Generally it's better to avoid mutations,\n// but it's good here for the sake of performance\n// to avoid expensive index searches.\nmonitor.getItem().index=hoverIndex;}};var DragableBodyRow=DropTarget('row',rowTarget,function(connect,monitor){return{connectDropTarget:connect.dropTarget(),isOver:monitor.isOver()};})(DragSource('row',rowSource,function(connect){return{connectDragSource:connect.dragSource()};})(BodyRow));var columns=[{title:'Name',dataIndex:'name',key:'name'},{title:'Age',dataIndex:'age',key:'age'},{title:'Address',dataIndex:'address',key:'address'}];var EditableTable=/*#__PURE__*/function(_React$Component2){_inherits(EditableTable,_React$Component2);var _super2=_createSuper(EditableTable);function EditableTable(props){var _this;_classCallCheck(this,EditableTable);_this=_super2.call(this,props);_this.columns=void 0;_this.components={body:{row:DragableBodyRow}};_this.moveRow=function(dragIndex,hoverIndex){var data=_this.state.data;var dragRow=data[dragIndex];_this.setState(update(_this.state,{data:{$splice:[[dragIndex,1],[hoverIndex,0,dragRow]]}}));};_this.state={data:[{key:'1',name:'John Brown',age:32,address:'New York No. 1 Lake Park'},{key:'2',name:'Jim Green',age:42,address:'London No. 1 Lake Park'},{key:'3',name:'Joe Black',age:32,address:'Sidney No. 1 Lake Park'}]};return _this;}_createClass(EditableTable,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(DndProvider,{backend:HTML5Backend,children:/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:this.state.data,components:this.components,onRow:function onRow(record,index){return{index:index,moveRow:_this2.moveRow};}})});}}]);return EditableTable;}(React.Component);export default EditableTable;","map":{"version":3,"names":["React","Table","DndProvider","DragSource","DropTarget","HTML5Backend","update","jsx","_jsx","dragingIndex","BodyRow","_React$Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","render","_this$props","props","isOver","connectDragSource","connectDropTarget","moveRow","restProps","_objectWithoutProperties","_excluded","style","_objectSpread","cursor","className","index","Component","rowSource","beginDrag","rowTarget","drop","monitor","dragIndex","getItem","hoverIndex","DragableBodyRow","connect","dropTarget","dragSource","columns","title","dataIndex","EditableTable","_React$Component2","_super2","_this","call","components","body","row","data","state","dragRow","setState","$splice","name","age","address","_this2","backend","children","dataSource","onRow","record"],"sources":["/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd带编辑的表格/src/App.tsx"],"sourcesContent":["/**拖拽表格 */\nimport React from 'react';\nimport 'antd/dist/antd.css';\nimport './index.css';\nimport { Table, Input, InputNumber, Popconfirm } from 'antd';\nimport { DndProvider, DragSource, DropTarget } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport update from 'immutability-helper';\n\nlet dragingIndex = -1;\n\nclass BodyRow extends React.Component<any, any> {\n  render() {\n    const { isOver, connectDragSource, connectDropTarget, moveRow, ...restProps } = this.props;\n    const style = { ...restProps.style, cursor: 'move' };\n\n    let { className } = restProps;\n    if (isOver) {\n      if (restProps.index > dragingIndex) {\n        className += ' drop-over-downward';\n      }\n      if (restProps.index < dragingIndex) {\n        className += ' drop-over-upward';\n      }\n    }\n\n    return connectDragSource(\n      connectDropTarget(<tr {...restProps} className={className} style={style} />),\n    );\n  }\n}\n\nconst rowSource = {\n  beginDrag(props) {\n    dragingIndex = props.index;\n    return {\n      index: props.index,\n    };\n  },\n};\n\nconst rowTarget = {\n  drop(props, monitor) {\n    const dragIndex = monitor.getItem().index;\n    const hoverIndex = props.index;\n\n    // Don't replace items with themselves\n    if (dragIndex === hoverIndex) {\n      return;\n    }\n\n    // Time to actually perform the action\n    props.moveRow(dragIndex, hoverIndex);\n\n    // Note: we're mutating the monitor item here!\n    // Generally it's better to avoid mutations,\n    // but it's good here for the sake of performance\n    // to avoid expensive index searches.\n    monitor.getItem().index = hoverIndex;\n  },\n};\n\nconst DragableBodyRow = DropTarget('row', rowTarget, (connect, monitor) => ({\n  connectDropTarget: connect.dropTarget(),\n  isOver: monitor.isOver(),\n}))(\n  DragSource('row', rowSource, connect => ({\n    connectDragSource: connect.dragSource(),\n  }))(BodyRow),\n);\n\nconst columns = [\n  {\n    title: 'Name',\n    dataIndex: 'name',\n    key: 'name',\n  },\n  {\n    title: 'Age',\n    dataIndex: 'age',\n    key: 'age',\n  },\n  {\n    title: 'Address',\n    dataIndex: 'address',\n    key: 'address',\n  },\n];\n\n\nexport interface CAFormOfTableProps {\n\n}\n\nexport interface CAFormOfTableState {\n\n}\n\n\nclass EditableTable extends React.Component<any, any>{\n  private columns;\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      data: [\n        {\n          key: '1',\n          name: 'John Brown',\n          age: 32,\n          address: 'New York No. 1 Lake Park',\n        },\n        {\n          key: '2',\n          name: 'Jim Green',\n          age: 42,\n          address: 'London No. 1 Lake Park',\n        },\n        {\n          key: '3',\n          name: 'Joe Black',\n          age: 32,\n          address: 'Sidney No. 1 Lake Park',\n        },\n      ],\n    };\n  }\n\n  components = {\n    body: {\n      row: DragableBodyRow,\n    },\n  };\n\n  moveRow = (dragIndex, hoverIndex) => {\n    const { data } = this.state;\n    const dragRow = data[dragIndex];\n\n    this.setState(\n      update(this.state, {\n        data: {\n          $splice: [[dragIndex, 1], [hoverIndex, 0, dragRow]],\n        },\n      }),\n    );\n  };\n\n\n  render() {\n    return (\n      <DndProvider backend={HTML5Backend}>\n        <Table\n          columns={columns}\n          dataSource={this.state.data}\n          components={this.components}\n          onRow={(record, index) => ({\n            index,\n            moveRow: this.moveRow,\n          })}\n        />\n      </DndProvider>\n    );\n  }\n}\n\nexport default EditableTable;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}