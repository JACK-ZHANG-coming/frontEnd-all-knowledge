{"ast":null,"code":"/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule editOnCut\n * @format\n * \n */\n\n'use strict';\n\nvar DraftModifier = require('./DraftModifier');\nvar EditorState = require('./EditorState');\nvar Style = require('fbjs/lib/Style');\nvar getFragmentFromSelection = require('./getFragmentFromSelection');\nvar getScrollPosition = require('fbjs/lib/getScrollPosition');\n\n/**\n * On `cut` events, native behavior is allowed to occur so that the system\n * clipboard is set properly. This means that we need to take steps to recover\n * the editor DOM state after the `cut` has occurred in order to maintain\n * control of the component.\n *\n * In addition, we can keep a copy of the removed fragment, including all\n * styles and entities, for use as an internal paste.\n */\nfunction editOnCut(editor, e) {\n  var editorState = editor._latestEditorState;\n  var selection = editorState.getSelection();\n  var element = e.target;\n  var scrollPosition = void 0;\n\n  // No selection, so there's nothing to cut.\n  if (selection.isCollapsed()) {\n    e.preventDefault();\n    return;\n  }\n\n  // Track the current scroll position so that it can be forced back in place\n  // after the editor regains control of the DOM.\n  if (element instanceof Node) {\n    scrollPosition = getScrollPosition(Style.getScrollParent(element));\n  }\n  var fragment = getFragmentFromSelection(editorState);\n  editor.setClipboard(fragment);\n\n  // Set `cut` mode to disable all event handling temporarily.\n  editor.setMode('cut');\n\n  // Let native `cut` behavior occur, then recover control.\n  setTimeout(function () {\n    editor.restoreEditorDOM(scrollPosition);\n    editor.exitCurrentMode();\n    editor.update(removeFragment(editorState));\n  }, 0);\n}\nfunction removeFragment(editorState) {\n  var newContent = DraftModifier.removeRange(editorState.getCurrentContent(), editorState.getSelection(), 'forward');\n  return EditorState.push(editorState, newContent, 'remove-range');\n}\nmodule.exports = editOnCut;","map":{"version":3,"names":["DraftModifier","require","EditorState","Style","getFragmentFromSelection","getScrollPosition","editOnCut","editor","e","editorState","_latestEditorState","selection","getSelection","element","target","scrollPosition","isCollapsed","preventDefault","Node","getScrollParent","fragment","setClipboard","setMode","setTimeout","restoreEditorDOM","exitCurrentMode","update","removeFragment","newContent","removeRange","getCurrentContent","push","module","exports"],"sources":["/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd带编辑的表格/node_modules/rc-editor-mention/node_modules/draft-js/lib/editOnCut.js"],"sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule editOnCut\n * @format\n * \n */\n\n'use strict';\n\nvar DraftModifier = require('./DraftModifier');\nvar EditorState = require('./EditorState');\nvar Style = require('fbjs/lib/Style');\n\nvar getFragmentFromSelection = require('./getFragmentFromSelection');\nvar getScrollPosition = require('fbjs/lib/getScrollPosition');\n\n/**\n * On `cut` events, native behavior is allowed to occur so that the system\n * clipboard is set properly. This means that we need to take steps to recover\n * the editor DOM state after the `cut` has occurred in order to maintain\n * control of the component.\n *\n * In addition, we can keep a copy of the removed fragment, including all\n * styles and entities, for use as an internal paste.\n */\nfunction editOnCut(editor, e) {\n  var editorState = editor._latestEditorState;\n  var selection = editorState.getSelection();\n  var element = e.target;\n  var scrollPosition = void 0;\n\n  // No selection, so there's nothing to cut.\n  if (selection.isCollapsed()) {\n    e.preventDefault();\n    return;\n  }\n\n  // Track the current scroll position so that it can be forced back in place\n  // after the editor regains control of the DOM.\n  if (element instanceof Node) {\n    scrollPosition = getScrollPosition(Style.getScrollParent(element));\n  }\n\n  var fragment = getFragmentFromSelection(editorState);\n  editor.setClipboard(fragment);\n\n  // Set `cut` mode to disable all event handling temporarily.\n  editor.setMode('cut');\n\n  // Let native `cut` behavior occur, then recover control.\n  setTimeout(function () {\n    editor.restoreEditorDOM(scrollPosition);\n    editor.exitCurrentMode();\n    editor.update(removeFragment(editorState));\n  }, 0);\n}\n\nfunction removeFragment(editorState) {\n  var newContent = DraftModifier.removeRange(editorState.getCurrentContent(), editorState.getSelection(), 'forward');\n  return EditorState.push(editorState, newContent, 'remove-range');\n}\n\nmodule.exports = editOnCut;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,aAAa,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAC9C,IAAIC,WAAW,GAAGD,OAAO,CAAC,eAAe,CAAC;AAC1C,IAAIE,KAAK,GAAGF,OAAO,CAAC,gBAAgB,CAAC;AAErC,IAAIG,wBAAwB,GAAGH,OAAO,CAAC,4BAA4B,CAAC;AACpE,IAAII,iBAAiB,GAAGJ,OAAO,CAAC,4BAA4B,CAAC;;AAE7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASK,SAASA,CAACC,MAAM,EAAEC,CAAC,EAAE;EAC5B,IAAIC,WAAW,GAAGF,MAAM,CAACG,kBAAkB;EAC3C,IAAIC,SAAS,GAAGF,WAAW,CAACG,YAAY,CAAC,CAAC;EAC1C,IAAIC,OAAO,GAAGL,CAAC,CAACM,MAAM;EACtB,IAAIC,cAAc,GAAG,KAAK,CAAC;;EAE3B;EACA,IAAIJ,SAAS,CAACK,WAAW,CAAC,CAAC,EAAE;IAC3BR,CAAC,CAACS,cAAc,CAAC,CAAC;IAClB;EACF;;EAEA;EACA;EACA,IAAIJ,OAAO,YAAYK,IAAI,EAAE;IAC3BH,cAAc,GAAGV,iBAAiB,CAACF,KAAK,CAACgB,eAAe,CAACN,OAAO,CAAC,CAAC;EACpE;EAEA,IAAIO,QAAQ,GAAGhB,wBAAwB,CAACK,WAAW,CAAC;EACpDF,MAAM,CAACc,YAAY,CAACD,QAAQ,CAAC;;EAE7B;EACAb,MAAM,CAACe,OAAO,CAAC,KAAK,CAAC;;EAErB;EACAC,UAAU,CAAC,YAAY;IACrBhB,MAAM,CAACiB,gBAAgB,CAACT,cAAc,CAAC;IACvCR,MAAM,CAACkB,eAAe,CAAC,CAAC;IACxBlB,MAAM,CAACmB,MAAM,CAACC,cAAc,CAAClB,WAAW,CAAC,CAAC;EAC5C,CAAC,EAAE,CAAC,CAAC;AACP;AAEA,SAASkB,cAAcA,CAAClB,WAAW,EAAE;EACnC,IAAImB,UAAU,GAAG5B,aAAa,CAAC6B,WAAW,CAACpB,WAAW,CAACqB,iBAAiB,CAAC,CAAC,EAAErB,WAAW,CAACG,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC;EAClH,OAAOV,WAAW,CAAC6B,IAAI,CAACtB,WAAW,EAAEmB,UAAU,EAAE,cAAc,CAAC;AAClE;AAEAI,MAAM,CAACC,OAAO,GAAG3B,SAAS"},"metadata":{},"sourceType":"script","externalDependencies":[]}