{"ast":null,"code":"/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule keyCommandTransposeCharacters\n * @format\n * \n */\n\n'use strict';\n\nvar DraftModifier = require('./DraftModifier');\nvar EditorState = require('./EditorState');\nvar getContentStateFragment = require('./getContentStateFragment');\n\n/**\n * Transpose the characters on either side of a collapsed cursor, or\n * if the cursor is at the end of the block, transpose the last two\n * characters.\n */\nfunction keyCommandTransposeCharacters(editorState) {\n  var selection = editorState.getSelection();\n  if (!selection.isCollapsed()) {\n    return editorState;\n  }\n  var offset = selection.getAnchorOffset();\n  if (offset === 0) {\n    return editorState;\n  }\n  var blockKey = selection.getAnchorKey();\n  var content = editorState.getCurrentContent();\n  var block = content.getBlockForKey(blockKey);\n  var length = block.getLength();\n\n  // Nothing to transpose if there aren't two characters.\n  if (length <= 1) {\n    return editorState;\n  }\n  var removalRange;\n  var finalSelection;\n  if (offset === length) {\n    // The cursor is at the end of the block. Swap the last two characters.\n    removalRange = selection.set('anchorOffset', offset - 1);\n    finalSelection = selection;\n  } else {\n    removalRange = selection.set('focusOffset', offset + 1);\n    finalSelection = removalRange.set('anchorOffset', offset + 1);\n  }\n\n  // Extract the character to move as a fragment. This preserves its\n  // styling and entity, if any.\n  var movedFragment = getContentStateFragment(content, removalRange);\n  var afterRemoval = DraftModifier.removeRange(content, removalRange, 'backward');\n\n  // After the removal, the insertion target is one character back.\n  var selectionAfter = afterRemoval.getSelectionAfter();\n  var targetOffset = selectionAfter.getAnchorOffset() - 1;\n  var targetRange = selectionAfter.merge({\n    anchorOffset: targetOffset,\n    focusOffset: targetOffset\n  });\n  var afterInsert = DraftModifier.replaceWithFragment(afterRemoval, targetRange, movedFragment);\n  var newEditorState = EditorState.push(editorState, afterInsert, 'insert-fragment');\n  return EditorState.acceptSelection(newEditorState, finalSelection);\n}\nmodule.exports = keyCommandTransposeCharacters;","map":{"version":3,"names":["DraftModifier","require","EditorState","getContentStateFragment","keyCommandTransposeCharacters","editorState","selection","getSelection","isCollapsed","offset","getAnchorOffset","blockKey","getAnchorKey","content","getCurrentContent","block","getBlockForKey","length","getLength","removalRange","finalSelection","set","movedFragment","afterRemoval","removeRange","selectionAfter","getSelectionAfter","targetOffset","targetRange","merge","anchorOffset","focusOffset","afterInsert","replaceWithFragment","newEditorState","push","acceptSelection","module","exports"],"sources":["/Users/zhangqiang/Documents/GitHub/frontEnd-all-knowledge/examples/react/a08antd带编辑的表格/node_modules/rc-editor-mention/node_modules/draft-js/lib/keyCommandTransposeCharacters.js"],"sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule keyCommandTransposeCharacters\n * @format\n * \n */\n\n'use strict';\n\nvar DraftModifier = require('./DraftModifier');\nvar EditorState = require('./EditorState');\n\nvar getContentStateFragment = require('./getContentStateFragment');\n\n/**\n * Transpose the characters on either side of a collapsed cursor, or\n * if the cursor is at the end of the block, transpose the last two\n * characters.\n */\nfunction keyCommandTransposeCharacters(editorState) {\n  var selection = editorState.getSelection();\n  if (!selection.isCollapsed()) {\n    return editorState;\n  }\n\n  var offset = selection.getAnchorOffset();\n  if (offset === 0) {\n    return editorState;\n  }\n\n  var blockKey = selection.getAnchorKey();\n  var content = editorState.getCurrentContent();\n  var block = content.getBlockForKey(blockKey);\n  var length = block.getLength();\n\n  // Nothing to transpose if there aren't two characters.\n  if (length <= 1) {\n    return editorState;\n  }\n\n  var removalRange;\n  var finalSelection;\n\n  if (offset === length) {\n    // The cursor is at the end of the block. Swap the last two characters.\n    removalRange = selection.set('anchorOffset', offset - 1);\n    finalSelection = selection;\n  } else {\n    removalRange = selection.set('focusOffset', offset + 1);\n    finalSelection = removalRange.set('anchorOffset', offset + 1);\n  }\n\n  // Extract the character to move as a fragment. This preserves its\n  // styling and entity, if any.\n  var movedFragment = getContentStateFragment(content, removalRange);\n  var afterRemoval = DraftModifier.removeRange(content, removalRange, 'backward');\n\n  // After the removal, the insertion target is one character back.\n  var selectionAfter = afterRemoval.getSelectionAfter();\n  var targetOffset = selectionAfter.getAnchorOffset() - 1;\n  var targetRange = selectionAfter.merge({\n    anchorOffset: targetOffset,\n    focusOffset: targetOffset\n  });\n\n  var afterInsert = DraftModifier.replaceWithFragment(afterRemoval, targetRange, movedFragment);\n\n  var newEditorState = EditorState.push(editorState, afterInsert, 'insert-fragment');\n\n  return EditorState.acceptSelection(newEditorState, finalSelection);\n}\n\nmodule.exports = keyCommandTransposeCharacters;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,aAAa,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAC9C,IAAIC,WAAW,GAAGD,OAAO,CAAC,eAAe,CAAC;AAE1C,IAAIE,uBAAuB,GAAGF,OAAO,CAAC,2BAA2B,CAAC;;AAElE;AACA;AACA;AACA;AACA;AACA,SAASG,6BAA6BA,CAACC,WAAW,EAAE;EAClD,IAAIC,SAAS,GAAGD,WAAW,CAACE,YAAY,CAAC,CAAC;EAC1C,IAAI,CAACD,SAAS,CAACE,WAAW,CAAC,CAAC,EAAE;IAC5B,OAAOH,WAAW;EACpB;EAEA,IAAII,MAAM,GAAGH,SAAS,CAACI,eAAe,CAAC,CAAC;EACxC,IAAID,MAAM,KAAK,CAAC,EAAE;IAChB,OAAOJ,WAAW;EACpB;EAEA,IAAIM,QAAQ,GAAGL,SAAS,CAACM,YAAY,CAAC,CAAC;EACvC,IAAIC,OAAO,GAAGR,WAAW,CAACS,iBAAiB,CAAC,CAAC;EAC7C,IAAIC,KAAK,GAAGF,OAAO,CAACG,cAAc,CAACL,QAAQ,CAAC;EAC5C,IAAIM,MAAM,GAAGF,KAAK,CAACG,SAAS,CAAC,CAAC;;EAE9B;EACA,IAAID,MAAM,IAAI,CAAC,EAAE;IACf,OAAOZ,WAAW;EACpB;EAEA,IAAIc,YAAY;EAChB,IAAIC,cAAc;EAElB,IAAIX,MAAM,KAAKQ,MAAM,EAAE;IACrB;IACAE,YAAY,GAAGb,SAAS,CAACe,GAAG,CAAC,cAAc,EAAEZ,MAAM,GAAG,CAAC,CAAC;IACxDW,cAAc,GAAGd,SAAS;EAC5B,CAAC,MAAM;IACLa,YAAY,GAAGb,SAAS,CAACe,GAAG,CAAC,aAAa,EAAEZ,MAAM,GAAG,CAAC,CAAC;IACvDW,cAAc,GAAGD,YAAY,CAACE,GAAG,CAAC,cAAc,EAAEZ,MAAM,GAAG,CAAC,CAAC;EAC/D;;EAEA;EACA;EACA,IAAIa,aAAa,GAAGnB,uBAAuB,CAACU,OAAO,EAAEM,YAAY,CAAC;EAClE,IAAII,YAAY,GAAGvB,aAAa,CAACwB,WAAW,CAACX,OAAO,EAAEM,YAAY,EAAE,UAAU,CAAC;;EAE/E;EACA,IAAIM,cAAc,GAAGF,YAAY,CAACG,iBAAiB,CAAC,CAAC;EACrD,IAAIC,YAAY,GAAGF,cAAc,CAACf,eAAe,CAAC,CAAC,GAAG,CAAC;EACvD,IAAIkB,WAAW,GAAGH,cAAc,CAACI,KAAK,CAAC;IACrCC,YAAY,EAAEH,YAAY;IAC1BI,WAAW,EAAEJ;EACf,CAAC,CAAC;EAEF,IAAIK,WAAW,GAAGhC,aAAa,CAACiC,mBAAmB,CAACV,YAAY,EAAEK,WAAW,EAAEN,aAAa,CAAC;EAE7F,IAAIY,cAAc,GAAGhC,WAAW,CAACiC,IAAI,CAAC9B,WAAW,EAAE2B,WAAW,EAAE,iBAAiB,CAAC;EAElF,OAAO9B,WAAW,CAACkC,eAAe,CAACF,cAAc,EAAEd,cAAc,CAAC;AACpE;AAEAiB,MAAM,CAACC,OAAO,GAAGlC,6BAA6B"},"metadata":{},"sourceType":"script","externalDependencies":[]}